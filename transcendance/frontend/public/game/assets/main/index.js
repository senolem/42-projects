System.register("chunks:///_virtual/AcceptButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){var n,o,e,c,i,a,l;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,c=t.Button,i=t.Node,a=t.Component},function(t){l=t.AudioManager}],execute:function(){var r;o._RF.push({},"ee713UoVSRDBIr+jrBZFh0M","AcceptButton",void 0);var u=e.ccclass;e.property,t("AcceptButton",u("AcceptButton")(r=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),c=0;c<o;c++)e[c]=arguments[c];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(c),this.clickCallback=function(t){l.inst.playOneShotUI("button_click")},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(c.EventType.CLICK,this.clickCallback),this.node.on(i.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(c.EventType.CLICK,this.clickCallback),this.node.off(i.EventType.MOUSE_ENTER,this.hoverCallback)},o}(a))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./UIState.ts"],(function(t){var n,o,e,i,c,a,u,l,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,c=t.Node,a=t.Component},function(t){u=t.AudioManager},function(t){l=t.UIManager},function(t){r=t.UIState}],execute:function(){var s;o._RF.push({},"20e54r7rA1BRbhfldevhvB5","AudioButton",void 0);var h=e.ccclass;e.property,t("AudioButton",h("AudioButton")(s=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(i),this.clickCallback=function(t){u.inst.playOneShotUI("button_click"),l.inst.switchUIState(r.AudioSettingsMenu)},this.hoverCallback=function(t){u.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(i.EventType.CLICK,this.clickCallback),this.node.on(c.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(i.EventType.CLICK,this.clickCallback),this.node.off(c.EventType.MOUSE_ENTER,this.hoverCallback)},o}(a))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,s,i,u,c,n,r,l;return{setters:[function(e){t=e.createClass},function(e){o=e.cclegacy,s=e._decorator,i=e.resources,u=e.AudioClip,c=e.sys,n=e.Node,r=e.director,l=e.AudioSource}],execute:function(){var f,a;o._RF.push({},"693c78M9TVGU7EE3ajXxZFZ","AudioManager",void 0);var h=s.ccclass;s.property,e("AudioManager",h("AudioManager")(((a=function(){function e(){this.node=void 0,this._musicSource=void 0,this._effectsSource=void 0,this._UISource=void 0,this.clips=new Map,this.node=new n,this.node.name="AudioManager",r.getScene().addChild(this.node),r.addPersistRootNode(this.node),this._musicSource=this.node.addComponent(l),this._effectsSource=this.node.addComponent(l),this._UISource=this.node.addComponent(l),this._musicSource.playOnAwake=!1,this._effectsSource.playOnAwake=!1,this._UISource.playOnAwake=!1,this._musicSource.volume=this.getMusicVolume,this._effectsSource.volume=this.getEffectsVolume,this._UISource.volume=this.getUIVolume,this._musicSource.loop=!0,this._effectsSource.loop=!1,this._UISource.loop=!1}var o=e.prototype;return o.loadResources=function(){return new Promise((function(t,o){i.loadDir("audio",(function(s,i){s?o(s):(i.forEach((function(t){t instanceof u&&e.inst.clips.set(t.name,t)})),t())}))}))},o.getClip=function(e){return this.clips.get(e)},o.playOneShotEffects=function(e){if(e instanceof u)this._effectsSource.playOneShot(e,1);else{var t=this.getClip(e);t?this._effectsSource.playOneShot(t):console.error("Unknown AudioClip '"+e+"'")}},o.playOneShotUI=function(e){if(e instanceof u)this._UISource.playOneShot(e,1);else{var t=this.getClip(e);t?this._UISource.playOneShot(t):console.error("Unknown AudioClip '"+e+"'")}},o.play=function(e){if(e instanceof u)this._musicSource.clip=e,this._musicSource.play();else{var t=this.getClip(e);t?(this._musicSource.clip=t,this._musicSource.play()):console.error("Unknown AudioClip '"+e+"'")}},o.stopMusic=function(){this._musicSource.stop()},o.pauseMusic=function(){this._musicSource.pause()},o.resumeMusic=function(){this._musicSource.play()},o.stopEffects=function(){this._effectsSource.stop()},o.pauseEffects=function(){this._effectsSource.pause()},o.resumeEffects=function(){this._effectsSource.play()},o.stopUI=function(){this._UISource.stop()},o.pauseUI=function(){this._UISource.pause()},o.resumeUI=function(){this._UISource.play()},o.setMusicVolume=function(e){c.localStorage.setItem("musicVolume",e),this._musicSource.volume=e},o.setEffectsVolume=function(e){c.localStorage.setItem("effectsVolume",e),this._effectsSource.volume=e},o.setUIVolume=function(e){c.localStorage.setItem("UIVolume",e),this._UISource.volume=e},t(e,[{key:"musicSource",get:function(){return this._musicSource}},{key:"effectsSource",get:function(){return this._effectsSource}},{key:"UISource",get:function(){return this._UISource}},{key:"getMusicVolume",get:function(){var e=c.localStorage.getItem("musicVolume");return void 0===e&&(e=.2,c.localStorage.setItem("musicVolume",e),this._musicSource.volume=e),e}},{key:"getEffectsVolume",get:function(){var e=c.localStorage.getItem("effectsVolume");return void 0===e&&(e=.35,c.localStorage.setItem("effectsVolume",e),this._effectsSource.volume=e),e}},{key:"getUIVolume",get:function(){var e=c.localStorage.getItem("UIVolume");return void 0===e&&(e=.025,c.localStorage.setItem("UIVolume",e),this._musicSource.volume=e),e}}],[{key:"inst",get:function(){return null==this._inst&&(this._inst=new e),this._inst}}]),e}())._inst=void 0,f=a))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/AudioSettingsMenuBackButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./UIState.ts"],(function(t){var n,o,e,i,c,a,u,s,l;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,c=t.Node,a=t.Component},function(t){u=t.AudioManager},function(t){s=t.UIManager},function(t){l=t.UIState}],execute:function(){var r;o._RF.push({},"116982TMJ5OyqHVN9IoXjth","AudioSettingsMenuBackButton",void 0);var h=e.ccclass;e.property,t("AudioSettingsMenuBackButton",h("AudioSettingsMenuBackButton")(r=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(i),this.clickCallback=function(t){u.inst.playOneShotUI("button_click"),s.inst.switchUIState(l.SettingsMenu)},this.hoverCallback=function(t){u.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(i.EventType.CLICK,this.clickCallback),this.node.on(c.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(i.EventType.CLICK,this.clickCallback),this.node.off(c.EventType.MOUSE_ENTER,this.hoverCallback)},o}(a))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/BodyType.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"67101Q/0Z9J+4sTL6iB2NKQ","BodyType",void 0);t("BodyType",function(t){return t[t.Static=1]="Static",t[t.Dynamic=2]="Dynamic",t[t.Kinematic=3]="Kinematic",t}({}));c._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonScaler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,a,s,o,r,c,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,r=t.Vec3,c=t.Button,l=t.tween,u=t.Input,h=t.Component}],execute:function(){var p,_,f,d;s._RF.push({},"aeffbvAe81PUK6yo5lqC9d9","ButtonScaler",void 0);var y=o.ccclass,v=o.property;t("ButtonScaler",y((f=e((_=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(e,"scaleTo",f,a(e)),i(e,"transDuration",d,a(e)),e.initScale=new r,e.button=null,e._scale=new r(1,1,1),e._lastScale=new r,e._start=new r,e}n(e,t);var s=e.prototype;return s.onLoad=function(){var t=this;t.initScale=this.node.scale,t.button=t.getComponent(c);var e=l(this._scale),n=l(this._scale);function i(t){e.stop(),n.start()}this.node.getScale(this._start),e.to(this.transDuration,this.scaleTo,{easing:"cubicInOut"}),n.to(this.transDuration,this._start,{easing:"cubicInOut"}),this._lastScale.set(this._scale),this.node.on(u.EventType.TOUCH_START,(function(t){e.start()}),this),this.node.on(u.EventType.TOUCH_END,i,this),this.node.on(u.EventType.TOUCH_CANCEL,i,this)},s.update=function(){this._scale.equals(this._lastScale)||(this.node.setScale(this._scale),this._lastScale.set(this._scale))},e}(h)).prototype,"scaleTo",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r(1.2,1.2,1.2)}}),d=e(_.prototype,"transDuration",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),p=_))||p);s._RF.pop()}}}));

System.register("chunks:///_virtual/CalculateLevel.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c0cb82hG5ZChIq6jpoBVKZb","CalculateLevel",void 0);e("calculateLevel",(function(e){return Math.round(.07*Math.pow(e,.5))}));t._RF.pop()}}}));

System.register("chunks:///_virtual/CancelButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./NetworkManager.ts"],(function(t){var n,o,e,a,c,i,l,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,a=t.Button,c=t.Node,i=t.Component},function(t){l=t.AudioManager},function(t){r=t.NetworkManager}],execute:function(){var u;o._RF.push({},"a909bxlDqhDZbxuppaYLjuW","CancelButton",void 0);var s=e.ccclass;e.property,t("CancelButton",s("CancelButton")(u=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(a),this.clickCallback=function(t){l.inst.playOneShotUI("button_click"),r.inst.leaveMatchmaking()},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(a.EventType.CLICK,this.clickCallback),this.node.on(c.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(a.EventType.CLICK,this.clickCallback),this.node.off(c.EventType.MOUSE_ENTER,this.hoverCallback)},o}(i))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/colyseus.js",["./cjs-loader.mjs"],(function(t,e){var n;return{setters:[function(t){n=t.default}],execute:function(){t("default",void 0);var r=t("__cjsMetaURL",e.meta.url);n.define(r,(function(e,n,r,i,o){!function(t,n){"object"==typeof e&&void 0!==r?n(e):"function"==typeof define&&define.amd?define("colyseus.js",["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).Colyseus={})}(this,(function(t){function e(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(n){if("default"!==n&&!(n in t)){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}))})),Object.freeze(t)}ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return null!==t&&"object"==typeof t&&t.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window);var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function s(t,e){e.headers=t.headers||{},e.statusMessage=t.statusText,e.statusCode=t.status,e.data=t.response}function a(t,e,n){return new Promise((function(r,i){n=n||{};var o,a,c,f=new XMLHttpRequest,h=n.body,u=n.headers||{};for(o in n.timeout&&(f.timeout=n.timeout),f.ontimeout=f.onerror=function(t){t.timeout="timeout"==t.type,i(t)},f.open(t,e.href||e),f.onload=function(){for(c=f.getAllResponseHeaders().trim().split(/[\r\n]+/),s(f,f);a=c.shift();)a=a.split(": "),f.headers[a.shift().toLowerCase()]=a.join(": ");if((a=f.headers["content-type"])&&~a.indexOf("application/json"))try{f.data=JSON.parse(f.data,n.reviver)}catch(t){return s(f,t),i(t)}(f.status>=400?i:r)(f)},typeof FormData<"u"&&h instanceof FormData||h&&"object"==typeof h&&(u["content-type"]="application/json",h=JSON.stringify(h)),f.withCredentials=!!n.withCredentials,u)f.setRequestHeader(o,u[o]);f.send(h)}))}var c,f=a.bind(a,"GET"),h=a.bind(a,"POST"),u=a.bind(a,"PATCH"),d=a.bind(a,"DELETE"),p=a.bind(a,"PUT"),l=f,v=h,y={del:d,get:l,patch:u,post:v,put:p,send:a},g=e({__proto__:null,default:y,del:d,get:l,patch:u,post:v,put:p,send:a},[y]);!function(t){t[t.CONSENTED=4e3]="CONSENTED",t[t.DEVMODE_RESTART=4010]="DEVMODE_RESTART"}(c||(c={}));var m=function(t){function e(e,n){var r=t.call(this,n)||this;return r.name="ServerError",r.code=e,r}return r(e,t),e}(Error);function E(t,e){if(this._offset=e,t instanceof ArrayBuffer)this._buffer=t,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this._buffer=t.buffer,this._view=new DataView(this._buffer,t.byteOffset,t.byteLength)}}E.prototype._array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this._parse();return e},E.prototype._map=function(t){for(var e={},n=0;n<t;n++)e[this._parse()]=this._parse();return e},E.prototype._str=function(t){var e=function(t,e,n){for(var r="",i=0,o=e,s=e+n;o<s;o++){var a=t.getUint8(o);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(i=(7&a)<<18|(63&t.getUint8(++o))<<12|(63&t.getUint8(++o))<<6|(63&t.getUint8(++o))<<0)>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&a)<<12|(63&t.getUint8(++o))<<6|(63&t.getUint8(++o))<<0);else r+=String.fromCharCode((31&a)<<6|63&t.getUint8(++o));else r+=String.fromCharCode(a)}return r}(this._view,this._offset,t);return this._offset+=t,e},E.prototype._bin=function(t){var e=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,e},E.prototype._parse=function(){var t,e=this._view.getUint8(this._offset++),n=0,r=0,i=0,o=0;if(e<192)return e<128?e:e<144?this._map(15&e):e<160?this._array(15&e):this._str(31&e);if(e>223)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:if(n=this._view.getUint8(this._offset),r=this._view.getInt8(this._offset+1),this._offset+=2,-1===r){var s=this._view.getUint32(this._offset);return i=this._view.getInt32(this._offset+4),o=this._view.getUint32(this._offset+8),this._offset+=12,new Date(1e3*(4294967296*i+o)+s/1e6)}return[r,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),r=this._view.getInt8(this._offset+2),this._offset+=3,[r,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),r=this._view.getInt8(this._offset+4),this._offset+=5,[r,this._bin(n)];case 202:return t=this._view.getFloat32(this._offset),this._offset+=4,t;case 203:return t=this._view.getFloat64(this._offset),this._offset+=8,t;case 204:return t=this._view.getUint8(this._offset),this._offset+=1,t;case 205:return t=this._view.getUint16(this._offset),this._offset+=2,t;case 206:return t=this._view.getUint32(this._offset),this._offset+=4,t;case 207:return i=this._view.getUint32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,i+o;case 208:return t=this._view.getInt8(this._offset),this._offset+=1,t;case 209:return t=this._view.getInt16(this._offset),this._offset+=2,t;case 210:return t=this._view.getInt32(this._offset),this._offset+=4,t;case 211:return i=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,i+o;case 212:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?void(this._offset+=1):[r,this._bin(1)];case 213:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(2)];case 214:return r=this._view.getInt8(this._offset),this._offset+=1,-1===r?(t=this._view.getUint32(this._offset),this._offset+=4,new Date(1e3*t)):[r,this._bin(4)];case 215:return r=this._view.getInt8(this._offset),this._offset+=1,0===r?(i=this._view.getInt32(this._offset)*Math.pow(2,32),o=this._view.getUint32(this._offset+4),this._offset+=8,new Date(i+o)):-1===r?(i=this._view.getUint32(this._offset),o=this._view.getUint32(this._offset+4),this._offset+=8,new Date(1e3*(4294967296*(3&i)+o)+(i>>>2)/1e6)):[r,this._bin(8)];case 216:return r=this._view.getInt8(this._offset),this._offset+=1,[r,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")};function A(t,e,n){for(var r=0,i=0,o=n.length;i<o;i++)(r=n.charCodeAt(i))<128?t.setUint8(e++,r):r<2048?(t.setUint8(e++,192|r>>6),t.setUint8(e++,128|63&r)):r<55296||r>=57344?(t.setUint8(e++,224|r>>12),t.setUint8(e++,128|r>>6&63),t.setUint8(e++,128|63&r)):(i++,r=65536+((1023&r)<<10|1023&n.charCodeAt(i)),t.setUint8(e++,240|r>>18),t.setUint8(e++,128|r>>12&63),t.setUint8(e++,128|r>>6&63),t.setUint8(e++,128|63&r))}function _(t,e,n){var r=typeof n,i=0,o=0,s=0,a=0,c=0,f=0;if("string"===r){if((c=function(t){for(var e=0,n=0,r=0,i=t.length;r<i;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(n))<32)t.push(160|c),f=1;else if(c<256)t.push(217,c),f=2;else if(c<65536)t.push(218,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("String too long");t.push(219,c>>24,c>>16,c>>8,c),f=5}return e.push({_str:n,_length:c,_offset:t.length}),f+c}if("number"===r)return Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(t.push(n),1):n<256?(t.push(204,n),2):n<65536?(t.push(205,n>>8,n),3):n<4294967296?(t.push(206,n>>24,n>>16,n>>8,n),5):(s=n/Math.pow(2,32)>>0,a=n>>>0,t.push(207,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):n>=-32?(t.push(n),1):n>=-128?(t.push(208,n),2):n>=-32768?(t.push(209,n>>8,n),3):n>=-2147483648?(t.push(210,n>>24,n>>16,n>>8,n),5):(s=Math.floor(n/Math.pow(2,32)),a=n>>>0,t.push(211,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):(t.push(203),e.push({_float:n,_length:8,_offset:t.length}),9);if("object"===r){if(null===n)return t.push(192),1;if(Array.isArray(n)){if((c=n.length)<16)t.push(144|c),f=1;else if(c<65536)t.push(220,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Array too large");t.push(221,c>>24,c>>16,c>>8,c),f=5}for(i=0;i<c;i++)f+=_(t,e,n[i]);return f}if(n instanceof Date){var h=n.getTime(),u=Math.floor(h/1e3),d=1e6*(h-1e3*u);return u>=0&&d>=0&&u<=17179869183?0===d&&u<=4294967295?(t.push(214,255,u>>24,u>>16,u>>8,u),6):(s=u/4294967296,a=4294967295&u,t.push(215,255,d>>22,d>>14,d>>6,s,a>>24,a>>16,a>>8,a),10):(s=Math.floor(u/4294967296),a=u>>>0,t.push(199,12,255,d>>24,d>>16,d>>8,d,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),15)}if(n instanceof ArrayBuffer){if((c=n.byteLength)<256)t.push(196,c),f=2;else if(c<65536)t.push(197,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Buffer too large");t.push(198,c>>24,c>>16,c>>8,c),f=5}return e.push({_bin:n,_length:c,_offset:t.length}),f+c}if("function"==typeof n.toJSON)return _(t,e,n.toJSON());var p=[],l="",v=Object.keys(n);for(i=0,o=v.length;i<o;i++)void 0!==n[l=v[i]]&&"function"!=typeof n[l]&&p.push(l);if((c=p.length)<16)t.push(128|c),f=1;else if(c<65536)t.push(222,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Object too large");t.push(223,c>>24,c>>16,c>>8,c),f=5}for(i=0;i<c;i++)f+=_(t,e,l=p[i]),f+=_(t,e,n[l]);return f}if("boolean"===r)return t.push(n?195:194),1;if("undefined"===r)return t.push(192),1;if("function"==typeof n.toJSON)return _(t,e,n.toJSON());throw new Error("Could not encode")}function w(t){var e=[],n=[],r=_(e,n,t),i=new ArrayBuffer(r),o=new DataView(i),s=0,a=0,c=-1;n.length>0&&(c=n[0]._offset);for(var f,h=0,u=0,d=0,p=e.length;d<p;d++)if(o.setUint8(a+d,e[d]),d+1===c){if(h=(f=n[s])._length,u=a+c,f._bin)for(var l=new Uint8Array(f._bin),v=0;v<h;v++)o.setUint8(u+v,l[v]);else f._str?A(o,u,f._str):void 0!==f._float&&o.setFloat64(u,f._float);a+=h,n[++s]&&(c=n[s]._offset)}return i}var O,$,b=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},I=function(){function t(t){this.events=t}return t.prototype.send=function(t){t instanceof ArrayBuffer?this.ws.send(t):Array.isArray(t)&&this.ws.send(new Uint8Array(t).buffer)},t.prototype.connect=function(t){this.ws=new b(t,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},t.prototype.close=function(t,e){this.ws.close(t,e)},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.ws.readyState===b.OPEN},enumerable:!1,configurable:!0}),t}(),x=function(){function t(){this.events={},this.transport=new I(this.events)}return t.prototype.send=function(t){this.transport.send(t)},t.prototype.connect=function(t){this.transport.connect(t)},t.prototype.close=function(t,e){this.transport.close(t,e)},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.transport.isOpen},enumerable:!1,configurable:!0}),t}();function T(t,e){for(var n=t[e++],r="",i=0,o=e,s=e+n;o<s;o++){var a=t[o];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(i=(7&a)<<18|(63&t[++o])<<12|(63&t[++o])<<6|(63&t[++o])<<0)>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i)}else r+=String.fromCharCode((15&a)<<12|(63&t[++o])<<6|(63&t[++o])<<0);else r+=String.fromCharCode((31&a)<<6|63&t[++o]);else r+=String.fromCharCode(a)}return r}function R(t){void 0===t&&(t="");for(var e=0,n=0,r=0,i=t.length;r<i;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n+1}t.Protocol=void 0,(O=t.Protocol||(t.Protocol={}))[O.HANDSHAKE=9]="HANDSHAKE",O[O.JOIN_ROOM=10]="JOIN_ROOM",O[O.ERROR=11]="ERROR",O[O.LEAVE_ROOM=12]="LEAVE_ROOM",O[O.ROOM_DATA=13]="ROOM_DATA",O[O.ROOM_STATE=14]="ROOM_STATE",O[O.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",O[O.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",O[O.ROOM_DATA_BYTES=17]="ROOM_DATA_BYTES",t.ErrorCode=void 0,($=t.ErrorCode||(t.ErrorCode={}))[$.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",$[$.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",$[$.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",$[$.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",$[$.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",$[$.AUTH_FAILED=4215]="AUTH_FAILED",$[$.APPLICATION_ERROR=4216]="APPLICATION_ERROR";var P={};function C(t,e){P[t]=e}function S(t){var e=P[t];if(!e)throw new Error("missing serializer: "+t);return e}var D=function(){function t(){this.handlers=[]}return t.prototype.register=function(t,e){return this.handlers.push(t),this},t.prototype.invoke=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.handlers.forEach((function(n){return n.apply(t,e)}))},t.prototype.invokeAsync=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Promise.all(this.handlers.map((function(n){return n.apply(t,e)})))},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},t.prototype.clear=function(){this.handlers=[]},t}();function N(){var t=new D;function e(e){return t.register(e,null===this)}return e.once=function(e){t.register((function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];e.apply(this,r),t.remove(n)}))},e.remove=function(e){return t.remove(e)},e.invoke=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.invoke.apply(t,e)},e.invokeAsync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.invokeAsync.apply(t,e)},e.clear=function(){return t.clear()},e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var k,M,L=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){!function(t){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function r(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function i(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}var o,s=255,a=213;t.OPERATION=void 0,(o=t.OPERATION||(t.OPERATION={}))[o.ADD=128]="ADD",o[o.REPLACE=0]="REPLACE",o[o.DELETE=64]="DELETE",o[o.DELETE_AND_ADD=192]="DELETE_AND_ADD",o[o.TOUCH=1]="TOUCH",o[o.CLEAR=10]="CLEAR";var c=function(){function e(t,e,n){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=t,this.setParent(e,n)}return e.prototype.setParent=function(t,e,n){var r=this;if(this.indexes||(this.indexes=this.ref instanceof Rt?this.ref._definition.indexes:{}),this.parent=t,this.parentIndex=n,e)if(this.root=e,this.ref instanceof Rt){var i=this.ref._definition;for(var o in i.schema){var s=this.ref[o];if(s&&s.$changes){var a=i.indexes[o];s.$changes.setParent(this.ref,e,a)}}}else"object"==typeof this.ref&&this.ref.forEach((function(t,e){if(t instanceof Rt){var n=t.$changes,i=r.ref.$changes.indexes[e];n.setParent(r.ref,r.root,i)}}))},e.prototype.operation=function(t){this.changes.set(--this.currentCustomOperation,t)},e.prototype.change=function(e,n){void 0===n&&(n=t.OPERATION.ADD);var r="number"==typeof e?e:this.indexes[e];this.assertValidIndex(r,e);var i=this.changes.get(r);i&&i.op!==t.OPERATION.DELETE&&i.op!==t.OPERATION.TOUCH||this.changes.set(r,{op:i&&i.op===t.OPERATION.DELETE?t.OPERATION.DELETE_AND_ADD:n,index:r}),this.allChanges.add(r),this.changed=!0,this.touchParents()},e.prototype.touch=function(e){var n="number"==typeof e?e:this.indexes[e];this.assertValidIndex(n,e),this.changes.has(n)||this.changes.set(n,{op:t.OPERATION.TOUCH,index:n}),this.allChanges.add(n),this.touchParents()},e.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},e.prototype.getType=function(t){if(this.ref._definition)return(e=this.ref._definition).schema[e.fieldsByIndex[t]];var e,n=(e=this.parent._definition).schema[e.fieldsByIndex[this.parentIndex]];return Object.values(n)[0]},e.prototype.getChildrenFilter=function(){var t=this.parent._definition.childFilters;return t&&t[this.parentIndex]},e.prototype.getValue=function(t){return this.ref.getByIndex(t)},e.prototype.delete=function(e){var n="number"==typeof e?e:this.indexes[e];if(void 0!==n){var r=this.getValue(n);this.changes.set(n,{op:t.OPERATION.DELETE,index:n}),this.allChanges.delete(n),delete this.caches[n],r&&r.$changes&&(r.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema ".concat(this.ref.constructor.name,": trying to delete non-existing index: ").concat(e," (").concat(n,")"))},e.prototype.discard=function(e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=!1),this.ref instanceof Rt||this.changes.forEach((function(e){if(e.op===t.OPERATION.DELETE){var n=r.ref.getIndex(e.index);delete r.indexes[n]}})),this.changes.clear(),this.changed=e,n&&this.allChanges.clear(),this.currentCustomOperation=0},e.prototype.discardAll=function(){var t=this;this.changes.forEach((function(e){var n=t.getValue(e.index);n&&n.$changes&&n.$changes.discardAll()})),this.discard()},e.prototype.cache=function(t,e){this.caches[t]=e},e.prototype.clone=function(){return new e(this.ref,this.parent,this.root)},e.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},e.prototype.assertValidIndex=function(t,e){if(void 0===t)throw new Error('ChangeTree: missing index for field "'.concat(e,'"'))},e}();function f(t,e,n,r){return t[e]||(t[e]=[]),t[e].push(n),null==r||r.forEach((function(t,e){return n(t,e)})),function(){return u(t[e],t[e].indexOf(n))}}function h(e){var n=this,r="string"!=typeof this.$changes.getType();this.$items.forEach((function(i,o){e.push({refId:n.$changes.refId,op:t.OPERATION.DELETE,field:o,value:void 0,previousValue:i}),r&&n.$changes.root.removeRef(i.$changes.refId)}))}function u(t,e){if(-1===e||e>=t.length)return!1;for(var n=t.length-1,r=e;r<n;r++)t[r]=t[r+1];return t.length=n,!0}var d=function(t,e){var n=t.toString(),r=e.toString();return n<r?-1:n>r?1:0};function p(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"==typeof e||isNaN(e)?t[e]:t.at(e)},set:function(t,e,n){if("symbol"==typeof e||isNaN(e))t[e]=n;else{var r=Array.from(t.$items.keys()),i=parseInt(r[e]||e);null==n?t.deleteAt(i):t.setAt(i,n)}return!0},deleteProperty:function(t,e){return"number"==typeof e?t.deleteAt(e):delete t[e],!0}})}var l=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,t)}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return Array.isArray(t)||void 0!==t.array},Object.defineProperty(e.prototype,"length",{get:function(){return this.$items.size},set:function(t){0===t?this.clear():this.splice(t,this.length-t)},enumerable:!1,configurable:!0}),e.prototype.push=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){t=e.$refId++,e.setAt(t,n)})),t},e.prototype.pop=function(){var t=Array.from(this.$indexes.values()).pop();if(void 0!==t){this.$changes.delete(t),this.$indexes.delete(t);var e=this.$items.get(t);return this.$items.delete(t),e}},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.setAt=function(e,n){var r,i;void 0!==n.$changes&&n.$changes.setParent(this,this.$changes.root,e);var o=null!==(i=null===(r=this.$changes.indexes[e])||void 0===r?void 0:r.op)&&void 0!==i?i:t.OPERATION.ADD;this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,n),this.$changes.change(e,o)},e.prototype.deleteAt=function(t){var e=Array.from(this.$items.keys())[t];return void 0!==e&&this.$deleteAt(e)},e.prototype.$deleteAt=function(t){return this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.concat=function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new(e.bind.apply(e,i([void 0],(t=Array.from(this.$items.values())).concat.apply(t,n),!1)))},e.prototype.join=function(t){return Array.from(this.$items.values()).join(t)},e.prototype.reverse=function(){var t=this,e=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(n,r){t.setAt(e[r],n)})),this},e.prototype.shift=function(){var t=Array.from(this.$items.keys()).shift();if(void 0!==t){var e=this.$items.get(t);return this.$deleteAt(t),e}},e.prototype.slice=function(t,n){var r=new e;return r.push.apply(r,Array.from(this.$items.values()).slice(t,n)),r},e.prototype.sort=function(t){var e=this;void 0===t&&(t=d);var n=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(t).forEach((function(t,r){e.setAt(n[r],t)})),this},e.prototype.splice=function(t,e){void 0===e&&(e=this.length-t);for(var n=Array.from(this.$items.keys()),r=[],i=t;i<t+e;i++)r.push(this.$items.get(n[i])),this.$deleteAt(n[i]);return r},e.prototype.unshift=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.length,i=e.length,o=Array.from(this.$items.values());return e.forEach((function(e,n){t.setAt(n,e)})),o.forEach((function(e,n){t.setAt(i+n,e)})),r+i},e.prototype.indexOf=function(t,e){return Array.from(this.$items.values()).indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){return void 0===e&&(e=this.length-1),Array.from(this.$items.values()).lastIndexOf(t,e)},e.prototype.every=function(t,e){return Array.from(this.$items.values()).every(t,e)},e.prototype.some=function(t,e){return Array.from(this.$items.values()).some(t,e)},e.prototype.forEach=function(t,e){Array.from(this.$items.values()).forEach(t,e)},e.prototype.map=function(t,e){return Array.from(this.$items.values()).map(t,e)},e.prototype.filter=function(t,e){return Array.from(this.$items.values()).filter(t,e)},e.prototype.reduce=function(t,e){return Array.prototype.reduce.apply(Array.from(this.$items.values()),arguments)},e.prototype.reduceRight=function(t,e){return Array.prototype.reduceRight.apply(Array.from(this.$items.values()),arguments)},e.prototype.find=function(t,e){return Array.from(this.$items.values()).find(t,e)},e.prototype.findIndex=function(t,e){return Array.from(this.$items.values()).findIndex(t,e)},e.prototype.fill=function(t,e,n){throw new Error("ArraySchema#fill() not implemented")},e.prototype.copyWithin=function(t,e,n){throw new Error("ArraySchema#copyWithin() not implemented")},e.prototype.toString=function(){return this.$items.toString()},e.prototype.toLocaleString=function(){return this.$items.toLocaleString()},e.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},e.prototype.includes=function(t,e){return Array.from(this.$items.values()).includes(t,e)},e.prototype.flatMap=function(t,e){throw new Error("ArraySchema#flatMap() is not supported.")},e.prototype.flat=function(t){throw new Error("ArraySchema#flat() is not supported.")},e.prototype.findLast=function(){var t=Array.from(this.$items.values());return t.findLast.apply(t,arguments)},e.prototype.findLastIndex=function(){var t=Array.from(this.$items.values());return t.findLastIndex.apply(t,arguments)},e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){return this.toArray().map((function(t){return"function"==typeof t.toJSON?t.toJSON():t}))},e.prototype.clone=function(t){return t?new(e.bind.apply(e,i([void 0],Array.from(this.$items.values()),!1))):new(e.bind.apply(e,i([void 0],this.map((function(t){return t.$changes?t.clone():t})),!1)))},e}();function v(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"!=typeof e&&void 0===t[e]?t.get(e):t[e]},set:function(t,e,n){return"symbol"!=typeof e&&-1===e.indexOf("$")&&"onAdd"!==e&&"onRemove"!==e&&"onChange"!==e?t.set(e,n):t[e]=n,!0},deleteProperty:function(t,e){return t.delete(e),!0}})}var y=function(){function e(t){var n=this;if(this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t)if(t instanceof Map||t instanceof e)t.forEach((function(t,e){return n.set(e,t)}));else for(var r in t)this.set(r,t[r])}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.map},e.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){if(null==n)throw new Error("MapSchema#set('".concat(e,"', ").concat(n,"): trying to set ").concat(n," value on '").concat(e,"'."));var r=void 0!==this.$changes.indexes[e],i=r?this.$changes.indexes[e]:this.$refId++,o=r?t.OPERATION.REPLACE:t.OPERATION.ADD,s=void 0!==n.$changes;return s&&n.$changes.setParent(this,this.$changes.root,i),r?s&&this.$items.get(e)!==n&&(o=t.OPERATION.ADD):(this.$changes.indexes[e]=i,this.$indexes.set(i,e)),this.$items.set(e,n),this.$changes.change(e,o),this},e.prototype.get=function(t){return this.$items.get(t)},e.prototype.delete=function(t){return this.$changes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return this.$items.has(t)},e.prototype.forEach=function(t){this.$items.forEach(t)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toJSON=function(){var t={};return this.forEach((function(e,n){t[n]="function"==typeof e.toJSON?e.toJSON():e})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t,e){t.$changes?n.set(e,t.clone()):n.set(e,t)}))),n},e}(),g={};function m(t,e){g[t]=e}function E(t){return g[t]}var A=function(){function t(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return t.create=function(e){var n=new t;return n.schema=Object.assign({},e&&e.schema||{}),n.indexes=Object.assign({},e&&e.indexes||{}),n.fieldsByIndex=Object.assign({},e&&e.fieldsByIndex||{}),n.descriptors=Object.assign({},e&&e.descriptors||{}),n.deprecated=Object.assign({},e&&e.deprecated||{}),n},t.prototype.addField=function(t,e){var n=this.getNextFieldIndex();this.fieldsByIndex[n]=t,this.indexes[t]=n,this.schema[t]=Array.isArray(e)?{array:e[0]}:e},t.prototype.hasField=function(t){return void 0!==this.indexes[t]},t.prototype.addFilter=function(t,e){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[t]]=e,this.indexesWithFilters.push(this.indexes[t]),!0},t.prototype.addChildrenFilter=function(t,e){var n=this.indexes[t],r=this.schema[t];if(E(Object.keys(r)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[n]=e,!0;console.warn("@filterChildren: field '".concat(t,"' can't have children. Ignoring filter."))},t.prototype.getChildrenFilter=function(t){return this.childFilters&&this.childFilters[this.indexes[t]]},t.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},t}();function _(t){return t._context&&t._context.useFilters}var w=function(){function t(){this.types={},this.schemas=new Map,this.useFilters=!1}return t.prototype.has=function(t){return this.schemas.has(t)},t.prototype.get=function(t){return this.types[t]},t.prototype.add=function(t,e){void 0===e&&(e=this.schemas.size),t._definition=A.create(t._definition),t._typeid=e,this.types[e]=t,this.schemas.set(t,e)},t.create=function(e){return void 0===e&&(e={}),function(n){return e.context||(e.context=new t),$(n,e)}},t}(),O=new w;function $(t,e){return void 0===e&&(e={}),function(n,r){var o=e.context||O,s=n.constructor;if(s._context=o,!t)throw new Error("".concat(s.name,': @type() reference provided for "').concat(r,"\" is undefined. Make sure you don't have any circular dependencies."));o.has(s)||o.add(s);var a=s._definition;if(a.addField(r,t),a.descriptors[r]){if(a.deprecated[r])return;try{throw new Error("@colyseus/schema: Duplicate '".concat(r,"' definition on '").concat(s.name,"'.\nCheck @type() annotation"))}catch(t){var c=t.stack.split("\n")[4].trim();throw new Error("".concat(t.message," ").concat(c))}}var f=l.is(t),h=!f&&y.is(t);if("string"!=typeof t&&!Rt.is(t)){var u=Object.values(t)[0];"string"==typeof u||o.has(u)||o.add(u)}if(e.manual)a.descriptors[r]={enumerable:!0,configurable:!0,writable:!0};else{var d="_".concat(r);a.descriptors[d]={enumerable:!1,configurable:!1,writable:!0},a.descriptors[r]={get:function(){return this[d]},set:function(t){t!==this[d]&&(null!=t?(!f||t instanceof l||(t=new(l.bind.apply(l,i([void 0],t,!1)))),!h||t instanceof y||(t=new y(t)),void 0===t.$proxy&&(h?t=v(t):f&&(t=p(t))),this.$changes.change(r),t.$changes&&t.$changes.setParent(this,this.$changes.root,this._definition.indexes[r])):this[d]&&this.$changes.delete(r),this[d]=t)},enumerable:!0,configurable:!0}}}}function b(t){return function(e,n){var r=e.constructor;r._definition.addFilter(n,t)&&(r._context.useFilters=!0)}}function I(t){return function(e,n){var r=e.constructor;r._definition.addChildrenFilter(n,t)&&(r._context.useFilters=!0)}}function x(t){return void 0===t&&(t=!0),function(e,n){var r=e.constructor._definition;r.deprecated[n]=!0,t&&(r.descriptors[n]={get:function(){throw new Error("".concat(n," is deprecated."))},set:function(t){},enumerable:!1,configurable:!0})}}function T(t,e,n){for(var r in void 0===n&&(n={}),n.context||(n.context=t._context||n.context||O),e)$(e[r],n)(t.prototype,r);return t}function R(t){for(var e=0,n=0,r=0,i=t.length;r<i;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function P(t,e,n){for(var r=0,i=0,o=n.length;i<o;i++)(r=n.charCodeAt(i))<128?t[e++]=r:r<2048?(t[e++]=192|r>>6,t[e++]=128|63&r):r<55296||r>=57344?(t[e++]=224|r>>12,t[e++]=128|r>>6&63,t[e++]=128|63&r):(i++,r=65536+((1023&r)<<10|1023&n.charCodeAt(i)),t[e++]=240|r>>18,t[e++]=128|r>>12&63,t[e++]=128|r>>6&63,t[e++]=128|63&r)}function C(t,e){t.push(255&e)}function S(t,e){t.push(255&e)}function D(t,e){t.push(255&e),t.push(e>>8&255)}function N(t,e){t.push(255&e),t.push(e>>8&255)}function k(t,e){t.push(255&e),t.push(e>>8&255),t.push(e>>16&255),t.push(e>>24&255)}function M(t,e){var n=e>>24,r=e>>16,i=e>>8,o=e;t.push(255&o),t.push(255&i),t.push(255&r),t.push(255&n)}function L(t,e){var n=Math.floor(e/Math.pow(2,32));M(t,e>>>0),M(t,n)}function j(t,e){var n=e/Math.pow(2,32)>>0;M(t,e>>>0),M(t,n)}function U(t,e){z(t,e)}function F(t,e){J(t,e)}var H=new Int32Array(2),B=new Float32Array(H.buffer),V=new Float64Array(H.buffer);function z(t,e){B[0]=e,k(t,H[0])}function J(t,e){V[0]=e,k(t,H[0]),k(t,H[1])}function q(t,e){return S(t,e?1:0)}function K(t,e){e||(e="");var n=R(e),r=0;if(n<32)t.push(160|n),r=1;else if(n<256)t.push(217),S(t,n),r=2;else if(n<65536)t.push(218),N(t,n),r=3;else{if(!(n<4294967296))throw new Error("String too long");t.push(219),M(t,n),r=5}return P(t,t.length,e),r+n}function W(t,e){return isNaN(e)?W(t,0):isFinite(e)?e!==(0|e)?(t.push(203),J(t,e),9):e>=0?e<128?(S(t,e),1):e<256?(t.push(204),S(t,e),2):e<65536?(t.push(205),N(t,e),3):e<4294967296?(t.push(206),M(t,e),5):(t.push(207),j(t,e),9):e>=-32?(t.push(224|e+32),1):e>=-128?(t.push(208),C(t,e),2):e>=-32768?(t.push(209),D(t,e),3):e>=-2147483648?(t.push(210),k(t,e),5):(t.push(211),L(t,e),9):W(t,e>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var X=Object.freeze({__proto__:null,utf8Write:P,int8:C,uint8:S,int16:D,uint16:N,int32:k,uint32:M,int64:L,uint64:j,float32:U,float64:F,writeFloat32:z,writeFloat64:J,boolean:q,string:K,number:W});function Y(t,e,n){for(var r="",i=0,o=e,s=e+n;o<s;o++){var a=t[o];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(i=(7&a)<<18|(63&t[++o])<<12|(63&t[++o])<<6|(63&t[++o])<<0)>=65536?(i-=65536,r+=String.fromCharCode(55296+(i>>>10),56320+(1023&i))):r+=String.fromCharCode(i):r+=String.fromCharCode((15&a)<<12|(63&t[++o])<<6|(63&t[++o])<<0):r+=String.fromCharCode((31&a)<<6|63&t[++o]):r+=String.fromCharCode(a)}return r}function G(t,e){return Q(t,e)<<24>>24}function Q(t,e){return t[e.offset++]}function Z(t,e){return tt(t,e)<<16>>16}function tt(t,e){return t[e.offset++]|t[e.offset++]<<8}function et(t,e){return t[e.offset++]|t[e.offset++]<<8|t[e.offset++]<<16|t[e.offset++]<<24}function nt(t,e){return et(t,e)>>>0}function rt(t,e){return ht(t,e)}function it(t,e){return ut(t,e)}function ot(t,e){var n=nt(t,e);return et(t,e)*Math.pow(2,32)+n}function st(t,e){var n=nt(t,e);return nt(t,e)*Math.pow(2,32)+n}var at=new Int32Array(2),ct=new Float32Array(at.buffer),ft=new Float64Array(at.buffer);function ht(t,e){return at[0]=et(t,e),ct[0]}function ut(t,e){return at[0]=et(t,e),at[1]=et(t,e),ft[0]}function dt(t,e){return Q(t,e)>0}function pt(t,e){var n,r=t[e.offset++];r<192?n=31&r:217===r?n=Q(t,e):218===r?n=tt(t,e):219===r&&(n=nt(t,e));var i=Y(t,e.offset,n);return e.offset+=n,i}function lt(t,e){var n=t[e.offset];return n<192&&n>160||217===n||218===n||219===n}function vt(t,e){var n=t[e.offset++];return n<128?n:202===n?ht(t,e):203===n?ut(t,e):204===n?Q(t,e):205===n?tt(t,e):206===n?nt(t,e):207===n?st(t,e):208===n?G(t,e):209===n?Z(t,e):210===n?et(t,e):211===n?ot(t,e):n>223?-1*(255-n+1):void 0}function yt(t,e){var n=t[e.offset];return n<128||n>=202&&n<=211}function gt(t,e){return t[e.offset]<160}function mt(t,e){return t[e.offset-1]===s&&(t[e.offset]<128||t[e.offset]>=202&&t[e.offset]<=211)}var Et=Object.freeze({__proto__:null,int8:G,uint8:Q,int16:Z,uint16:tt,int32:et,uint32:nt,float32:rt,float64:it,int64:ot,uint64:st,readFloat32:ht,readFloat64:ut,boolean:dt,string:pt,stringCheck:lt,number:vt,numberCheck:yt,arrayCheck:gt,switchStructureCheck:mt}),At=function(){function e(t){var e=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.collection},e.prototype.add=function(t){var e=this.$refId++;return void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,e),this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,t),this.$changes.change(e),e},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,n,r=this.$items.entries();(n=r.next())&&!n.done;)if(t===n.value[1]){e=n.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return Array.from(this.$items.values()).some((function(e){return e===t}))},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(n,r,i){return t(n,r,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,n){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t){t.$changes?n.add(t.clone()):n.add(t)}))),n},e}(),_t=function(){function e(t){var e=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.set},e.prototype.add=function(e){var n,r;if(this.has(e))return!1;var i=this.$refId++;void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,i);var o=null!==(r=null===(n=this.$changes.indexes[i])||void 0===n?void 0:n.op)&&void 0!==r?r:t.OPERATION.ADD;return this.$changes.indexes[i]=i,this.$indexes.set(i,i),this.$items.set(i,e),this.$changes.change(i,o),i},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,n,r=this.$items.entries();(n=r.next())&&!n.done;)if(t===n.value[1]){e=n.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){for(var e,n=this.$items.values(),r=!1;(e=n.next())&&!e.done;)if(t===e.value){r=!0;break}return r},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(n,r,i){return t(n,r,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,n){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t){t.$changes?n.add(t.clone()):n.add(t)}))),n},e}(),wt=function(){function t(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return t.prototype.addRefId=function(t){this.refIds.has(t)||(this.refIds.add(t),this.containerIndexes.set(t,new Set))},t.get=function(e){return void 0===e.$filterState&&(e.$filterState=new t),e.$filterState},t}(),Ot=function(){function t(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return t.prototype.getNextUniqueId=function(){return this.nextUniqueId++},t.prototype.addRef=function(t,e,n){void 0===n&&(n=!0),this.refs.set(t,e),n&&(this.refCounts[t]=(this.refCounts[t]||0)+1)},t.prototype.removeRef=function(t){this.refCounts[t]=this.refCounts[t]-1,this.deletedRefs.add(t)},t.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},t.prototype.garbageCollectDeletedRefs=function(){var t=this;this.deletedRefs.forEach((function(e){if(!(t.refCounts[e]>0)){var n=t.refs.get(e);if(n instanceof Rt)for(var r in n._definition.schema)"string"!=typeof n._definition.schema[r]&&n[r]&&n[r].$changes&&t.removeRef(n[r].$changes.refId);else{var i=n.$changes.parent._definition,o=i.schema[i.fieldsByIndex[n.$changes.parentIndex]];"function"==typeof Object.values(o)[0]&&Array.from(n.values()).forEach((function(e){return t.removeRef(e.$changes.refId)}))}t.refs.delete(e),delete t.refCounts[e]}})),this.deletedRefs.clear()},t}(),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Error);function bt(t,e,n,r){var i,o=!1;switch(e){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":i="number",isNaN(t)&&console.log('trying to encode "NaN" in '.concat(n.constructor.name,"#").concat(r));break;case"string":i="string",o=!0;break;case"boolean":return}if(typeof t!==i&&(!o||o&&null!==t)){var s="'".concat(JSON.stringify(t),"'").concat(t&&t.constructor&&" (".concat(t.constructor.name,")")||"");throw new $t("a '".concat(i,"' was expected, but ").concat(s," was provided in ").concat(n.constructor.name,"#").concat(r))}}function It(t,e,n,r){if(!(t instanceof e))throw new $t("a '".concat(e.name,"' was expected, but '").concat(t.constructor.name,"' was provided in ").concat(n.constructor.name,"#").concat(r))}function xt(t,e,n,r,i){bt(n,t,r,i);var o=X[t];if(!o)throw new $t("a '".concat(t,"' was expected, but ").concat(n," was provided in ").concat(r.constructor.name,"#").concat(i));o(e,n)}function Tt(t,e,n){return Et[t](e,n)}var Rt=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Object.defineProperties(this,{$changes:{value:new c(this,void 0,new Ot),enumerable:!1,writable:!0},$callbacks:{value:void 0,enumerable:!1,writable:!0}});var n=this._definition.descriptors;n&&Object.defineProperties(this,n),t[0]&&this.assign(t[0])}return e.onError=function(t){console.error(t)},e.is=function(t){return t._definition&&void 0!==t._definition.schema},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.assign=function(t){return Object.assign(this,t),this},Object.defineProperty(e.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),e.prototype.setDirty=function(t,e){this.$changes.change(t,e)},e.prototype.listen=function(t,e,n){var r=this;return void 0===n&&(n=!0),this.$callbacks||(this.$callbacks={}),this.$callbacks[t]||(this.$callbacks[t]=[]),this.$callbacks[t].push(e),n&&void 0!==this[t]&&e(this[t],void 0),function(){return u(r.$callbacks[t],r.$callbacks[t].indexOf(e))}},e.prototype.decode=function(n,r,i){var o;void 0===r&&(r={offset:0}),void 0===i&&(i=this);var a=[],c=this.$changes.root,f=n.length,h=0;for(c.refs.set(h,this);r.offset<f;){var u=n[r.offset++];if(u!=s){var d=i.$changes,p=void 0!==i._definition,v=p?u>>6<<6:u;if(v!==t.OPERATION.CLEAR){var g=p?u%(v||255):vt(n,r),m=p?i._definition.fieldsByIndex[g]:"",A=d.getType(g),_=void 0,w=void 0,O=void 0;if(p?w=i["_".concat(m)]:(w=i.getByIndex(g),(v&t.OPERATION.ADD)===t.OPERATION.ADD?(O=i instanceof y?pt(n,r):g,i.setIndex(g,O)):O=i.getIndex(g)),(v&t.OPERATION.DELETE)===t.OPERATION.DELETE&&(v!==t.OPERATION.DELETE_AND_ADD&&i.deleteByIndex(g),w&&w.$changes&&c.removeRef(w.$changes.refId),_=null),void 0!==m){if(v===t.OPERATION.DELETE);else if(e.is(A)){var $=vt(n,r);if(_=c.refs.get($),v!==t.OPERATION.REPLACE){var b=this.getSchemaType(n,r,A);_||((_=this.createTypeInstance(b)).$changes.refId=$,w&&(_.$callbacks=w.$callbacks,w.$changes.refId&&$!==w.$changes.refId&&c.removeRef(w.$changes.refId))),c.addRef($,_,_!==w)}}else if("string"==typeof A)_=Tt(A,n,r);else{var I=E(Object.keys(A)[0]),x=vt(n,r),T=c.refs.has(x)?w||c.refs.get(x):new I.constructor;if((_=T.clone(!0)).$changes.refId=x,w&&(_.$callbacks=w.$callbacks,w.$changes.refId&&x!==w.$changes.refId)){c.removeRef(w.$changes.refId);for(var R=w.entries(),P=void 0;(P=R.next())&&!P.done;){var C=(o=P.value)[0],S=o[1];a.push({refId:x,op:t.OPERATION.DELETE,field:C,value:void 0,previousValue:S})}}c.addRef(x,_,T!==w)}if(null!=_)if(_.$changes&&_.$changes.setParent(d.ref,d.root,g),i instanceof e)i[m]=_;else if(i instanceof y)C=O,i.$items.set(C,_),i.$changes.allChanges.add(g);else if(i instanceof l)i.setAt(g,_);else if(i instanceof At){var D=i.add(_);i.setIndex(g,D)}else i instanceof _t&&!1!==(D=i.add(_))&&i.setIndex(g,D);w!==_&&a.push({refId:h,op:v,field:m,dynamicIndex:O,value:_,previousValue:w})}else{console.warn("@colyseus/schema: definition mismatch");for(var N={offset:r.offset};r.offset<f&&(!mt(n,r)||(N.offset=r.offset+1,!c.refs.has(vt(n,N))));)r.offset++}}else i.clear(a)}else{h=vt(n,r);var k=c.refs.get(h);if(!k)throw new Error('"refId" not found: '.concat(h));i=k}}return this._triggerChanges(a),c.garbageCollectDeletedRefs(),a},e.prototype.encode=function(n,r,i){void 0===n&&(n=!1),void 0===r&&(r=[]),void 0===i&&(i=!1);for(var o=this.$changes,a=new WeakSet,c=[o],f=1,h=0;h<f;h++){var u=c[h],d=u.ref,p=d instanceof e;u.ensureRefId(),a.add(u),u!==o&&(u.changed||n)&&(S(r,s),W(r,u.refId));for(var l=n?Array.from(u.allChanges):Array.from(u.changes.values()),v=0,g=l.length;v<g;v++){var m=n?{op:t.OPERATION.ADD,index:l[v]}:l[v],A=m.index,_=p?d._definition.fieldsByIndex&&d._definition.fieldsByIndex[A]:A,w=r.length;if(m.op!==t.OPERATION.TOUCH)if(p)S(r,A|m.op);else{if(S(r,m.op),m.op===t.OPERATION.CLEAR)continue;W(r,A)}if(p||(m.op&t.OPERATION.ADD)!=t.OPERATION.ADD||d instanceof y&&K(r,u.ref.$indexes.get(A)),m.op!==t.OPERATION.DELETE){var O=u.getType(A),$=u.getValue(A);if($&&$.$changes&&!a.has($.$changes)&&(c.push($.$changes),$.$changes.ensureRefId(),f++),m.op!==t.OPERATION.TOUCH){if(e.is(O))It($,O,d,_),W(r,$.$changes.refId),(m.op&t.OPERATION.ADD)===t.OPERATION.ADD&&this.tryEncodeTypeId(r,O,$.constructor);else if("string"==typeof O)xt(O,r,$,d,_);else{var b=E(Object.keys(O)[0]);It(d["_".concat(_)],b.constructor,d,_),W(r,$.$changes.refId)}i&&u.cache(A,r.slice(w))}}}n||i||u.discard()}return r},e.prototype.encodeAll=function(t){return this.encode(!0,[],t)},e.prototype.applyFilters=function(n,r){var i,o;void 0===r&&(r=!1);for(var a=this,c=new Set,f=wt.get(n),h=[this.$changes],u=1,d=[],p=function(p){var l=h[p];if(c.has(l.refId))return"continue";var v=l.ref,g=v instanceof e;S(d,s),W(d,l.refId);var m=f.refIds.has(l),E=r||!m;f.addRefId(l);var A=f.containerIndexes.get(l),_=E?Array.from(l.allChanges):Array.from(l.changes.values());!r&&g&&v._definition.indexesWithFilters&&v._definition.indexesWithFilters.forEach((function(e){!A.has(e)&&l.allChanges.has(e)&&(E?_.push(e):_.push({op:t.OPERATION.ADD,index:e}))}));for(var w=0,O=_.length;w<O;w++){var $=E?{op:t.OPERATION.ADD,index:_[w]}:_[w];if($.op!==t.OPERATION.CLEAR){var b=$.index;if($.op!==t.OPERATION.DELETE){var I=l.getValue(b),x=l.getType(b);if(g){if((T=v._definition.filters&&v._definition.filters[b])&&!T.call(v,n,I,a)){I&&I.$changes&&c.add(I.$changes.refId);continue}}else{var T,R=l.parent;if((T=l.getChildrenFilter())&&!T.call(R,n,v.$indexes.get(b),I,a)){I&&I.$changes&&c.add(I.$changes.refId);continue}}if(I.$changes&&(h.push(I.$changes),u++),$.op!==t.OPERATION.TOUCH)if($.op===t.OPERATION.ADD||g)d.push.apply(d,null!==(i=l.caches[b])&&void 0!==i?i:[]),A.add(b);else if(A.has(b))d.push.apply(d,null!==(o=l.caches[b])&&void 0!==o?o:[]);else{if(A.add(b),S(d,t.OPERATION.ADD),W(d,b),v instanceof y){var P=l.ref.$indexes.get(b);K(d,P)}I.$changes?W(d,I.$changes.refId):X[x](d,I)}else I.$changes&&!g&&(S(d,t.OPERATION.ADD),W(d,b),v instanceof y&&(P=l.ref.$indexes.get(b),K(d,P)),W(d,I.$changes.refId))}else g?S(d,$.op|b):(S(d,$.op),W(d,b))}else S(d,$.op)}},l=0;l<u;l++)p(l);return d},e.prototype.clone=function(){var t,e=new this.constructor,n=this._definition.schema;for(var r in n)"object"==typeof this[r]&&"function"==typeof(null===(t=this[r])||void 0===t?void 0:t.clone)?e[r]=this[r].clone():e[r]=this[r];return e},e.prototype.toJSON=function(){var t=this._definition.schema,e=this._definition.deprecated,n={};for(var r in t)e[r]||null===this[r]||void 0===this[r]||(n[r]="function"==typeof this[r].toJSON?this[r].toJSON():this["_".concat(r)]);return n},e.prototype.discardAllChanges=function(){this.$changes.discardAll()},e.prototype.getByIndex=function(t){return this[this._definition.fieldsByIndex[t]]},e.prototype.deleteByIndex=function(t){this[this._definition.fieldsByIndex[t]]=void 0},e.prototype.tryEncodeTypeId=function(t,e,n){e._typeid!==n._typeid&&(S(t,a),W(t,n._typeid))},e.prototype.getSchemaType=function(t,e,n){var r;return t[e.offset]===a&&(e.offset++,r=this.constructor._context.get(vt(t,e))),r||n},e.prototype.createTypeInstance=function(t){var e=new t;return e.$changes.root=this.$changes.root,e},e.prototype._triggerChanges=function(n){for(var r,i,o,s,a,c,f,h,u,d=new Set,p=this.$changes.root.refs,l=function(l){var v=n[l],y=v.refId,g=p.get(y),m=g.$callbacks;if((v.op&t.OPERATION.DELETE)===t.OPERATION.DELETE&&v.previousValue instanceof e&&(null===(i=null===(r=v.previousValue.$callbacks)||void 0===r?void 0:r[t.OPERATION.DELETE])||void 0===i||i.forEach((function(t){return t()}))),!m)return"continue";if(g instanceof e){if(!d.has(y))try{null===(o=null==m?void 0:m[t.OPERATION.REPLACE])||void 0===o||o.forEach((function(t){return t(n)}))}catch(t){e.onError(t)}try{m.hasOwnProperty(v.field)&&(null===(s=m[v.field])||void 0===s||s.forEach((function(t){return t(v.value,v.previousValue)})))}catch(t){e.onError(t)}}else v.op===t.OPERATION.ADD&&void 0===v.previousValue?null===(a=m[t.OPERATION.ADD])||void 0===a||a.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)})):v.op===t.OPERATION.DELETE?void 0!==v.previousValue&&(null===(c=m[t.OPERATION.DELETE])||void 0===c||c.forEach((function(t){var e;return t(v.previousValue,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))):v.op===t.OPERATION.DELETE_AND_ADD&&(void 0!==v.previousValue&&(null===(f=m[t.OPERATION.DELETE])||void 0===f||f.forEach((function(t){var e;return t(v.previousValue,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))),null===(h=m[t.OPERATION.ADD])||void 0===h||h.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))),v.value!==v.previousValue&&(null===(u=m[t.OPERATION.REPLACE])||void 0===u||u.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)})));d.add(y)},v=0;v<n.length;v++)l(v)},e._definition=A.create(),e}();function Pt(t){for(var e=[t.$changes],n=1,r={},i=r,o=function(t){var n=e[t];n.changes.forEach((function(t){var e=n.ref,r=t.index,o=e._definition?e._definition.fieldsByIndex[r]:e.$indexes.get(r);i[o]=n.getValue(r)}))},s=0;s<n;s++)o(s);return r}var Ct={context:new w},St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),r([$("string",Ct)],e.prototype,"name",void 0),r([$("string",Ct)],e.prototype,"type",void 0),r([$("number",Ct)],e.prototype,"referencedType",void 0),e}(Rt),Dt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=new l,e}return n(e,t),r([$("number",Ct)],e.prototype,"id",void 0),r([$([St],Ct)],e.prototype,"fields",void 0),e}(Rt),Nt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.types=new l,e}return n(e,t),e.encode=function(t){var n=t.constructor,r=new e;r.rootType=n._typeid;var i=function(t,e){for(var n in e){var i=new St;i.name=n;var o=void 0;if("string"==typeof e[n])o=e[n];else{var s=e[n],a=void 0;Rt.is(s)?(o="ref",a=e[n]):"string"==typeof s[o=Object.keys(s)[0]]?o+=":"+s[o]:a=s[o],i.referencedType=a?a._typeid:-1}i.type=o,t.fields.push(i)}r.types.push(t)},o=n._context.types;for(var s in o){var a=new Dt;a.id=Number(s),i(a,o[s]._definition.schema)}return r.encodeAll()},e.decode=function(t,r){var i=new w,o=new e;o.decode(t,r);var s=o.types.reduce((function(t,e){var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Rt),o=e.id;return t[o]=r,i.add(r,o),t}),{});o.types.forEach((function(t){var e=s[t.id];t.fields.forEach((function(t){var n;if(void 0!==t.referencedType){var r=t.type,o=s[t.referencedType];if(!o){var a=t.type.split(":");r=a[0],o=a[1]}"ref"===r?$(o,{context:i})(e.prototype,t.name):$(((n={})[r]=o,n),{context:i})(e.prototype,t.name)}else $(t.type,{context:i})(e.prototype,t.name)}))}));var a=s[o.rootType],c=new a;for(var f in a._definition.schema){var h=a._definition.schema[f];"string"!=typeof h&&(c[f]="function"==typeof h?new h:new(E(Object.keys(h)[0]).constructor))}return c},r([$([Dt],Ct)],e.prototype,"types",void 0),r([$("number",Ct)],e.prototype,"rootType",void 0),e}(Rt);m("map",{constructor:y}),m("array",{constructor:l}),m("set",{constructor:_t}),m("collection",{constructor:At}),t.ArraySchema=l,t.CollectionSchema=At,t.Context=w,t.MapSchema=y,t.Reflection=Nt,t.ReflectionField=St,t.ReflectionType=Dt,t.Schema=Rt,t.SchemaDefinition=A,t.SetSchema=_t,t.decode=Et,t.defineTypes=T,t.deprecated=x,t.dumpChanges=Pt,t.encode=X,t.filter=b,t.filterChildren=I,t.hasFilter=_,t.registerType=m,t.type=$,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),j=function(){function e(t,e){var n=this;this.onStateChange=N(),this.onError=N(),this.onLeave=N(),this.onJoin=N(),this.hasJoined=!1,this.onMessageHandlers={events:{},emit:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(this.events[t]||[]).forEach((function(t){return t.apply(void 0,n)}))},on:function(t,e){var n=this;return(this.events[t]=this.events[t]||[]).push(e),function(){return n.events[t]=(n.events[t]||[]).filter((function(t){return t!==e}))}}},this.roomId=null,this.name=t,e&&(this.serializer=new(S("schema")),this.rootSchema=e,this.serializer.state=new e),this.onError((function(t,e){return console.warn("colyseus.js - onError => (".concat(t,") ").concat(e))})),this.onLeave((function(){return n.removeAllListeners()}))}return Object.defineProperty(e.prototype,"id",{get:function(){return this.roomId},enumerable:!1,configurable:!0}),e.prototype.connect=function(t,n,r){void 0===r&&(r=this);var i=new x;r.connection=i,i.events.onmessage=e.prototype.onMessageCallback.bind(r),i.events.onclose=function(t){if(!r.hasJoined)return console.warn("Room connection was closed unexpectedly (".concat(t.code,"): ").concat(t.reason)),void r.onError.invoke(t.code,t.reason);t.code===c.DEVMODE_RESTART&&n?n():(r.onLeave.invoke(t.code),r.destroy())},i.events.onerror=function(t){console.warn("Room, onError (".concat(t.code,"): ").concat(t.reason)),r.onError.invoke(t.code,t.reason)},i.connect(t)},e.prototype.leave=function(e){var n=this;return void 0===e&&(e=!0),new Promise((function(r){n.onLeave((function(t){return r(t)})),n.connection?e?n.connection.send([t.Protocol.LEAVE_ROOM]):n.connection.close():n.onLeave.invoke(c.CONSENTED)}))},e.prototype.onMessage=function(t,e){return this.onMessageHandlers.on(this.getMessageHandlerKey(t),e)},e.prototype.send=function(e,n){var r,i=[t.Protocol.ROOM_DATA];if("string"==typeof e?L.encode.string(i,e):L.encode.number(i,e),void 0!==n){var o=w(n);(r=new Uint8Array(i.length+o.byteLength)).set(new Uint8Array(i),0),r.set(new Uint8Array(o),i.length)}else r=new Uint8Array(i);this.connection.send(r.buffer)},e.prototype.sendBytes=function(e,n){var r,i=[t.Protocol.ROOM_DATA_BYTES];"string"==typeof e?L.encode.string(i,e):L.encode.number(i,e),(r=new Uint8Array(i.length+(n.byteLength||n.length))).set(new Uint8Array(i),0),r.set(new Uint8Array(n),i.length),this.connection.send(r.buffer)},Object.defineProperty(e.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),e.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},e.prototype.onMessageCallback=function(e){var n=Array.from(new Uint8Array(e.data)),r=n[0];if(r===t.Protocol.JOIN_ROOM){var i=1,o=T(n,i);if(i+=R(o),this.serializerId=T(n,i),i+=R(this.serializerId),!this.serializer){var s=S(this.serializerId);this.serializer=new s}n.length>i&&this.serializer.handshake&&this.serializer.handshake(n,{offset:i}),this.reconnectionToken="".concat(this.roomId,":").concat(o),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([t.Protocol.JOIN_ROOM])}else if(r===t.Protocol.ERROR){var a={offset:1},c=L.decode.number(n,a),f=L.decode.string(n,a);this.onError.invoke(c,f)}else if(r===t.Protocol.LEAVE_ROOM)this.leave();else if(r===t.Protocol.ROOM_DATA_SCHEMA){var h={offset:1};(f=new(d=this.serializer.getState().constructor._context.get(L.decode.number(n,h)))).decode(n,h),this.dispatchMessage(d,f)}else if(r===t.Protocol.ROOM_STATE)n.shift(),this.setState(n);else if(r===t.Protocol.ROOM_STATE_PATCH)n.shift(),this.patch(n);else if(r===t.Protocol.ROOM_DATA){var u={offset:1},d=L.decode.stringCheck(n,u)?L.decode.string(n,u):L.decode.number(n,u);f=n.length>u.offset?function(t,e){void 0===e&&(e=0);var n=new E(t,e),r=n._parse();if(n._offset!==t.byteLength)throw new Error(t.byteLength-n._offset+" trailing bytes");return r}(e.data,u.offset):void 0;this.dispatchMessage(d,f)}else if(r===t.Protocol.ROOM_DATA_BYTES){var p={offset:1};d=L.decode.stringCheck(n,p)?L.decode.string(n,p):L.decode.number(n,p);this.dispatchMessage(d,new Uint8Array(n.slice(p.offset)))}},e.prototype.setState=function(t){this.serializer.setState(t),this.onStateChange.invoke(this.serializer.getState())},e.prototype.patch=function(t){this.serializer.patch(t),this.onStateChange.invoke(this.serializer.getState())},e.prototype.dispatchMessage=function(t,e){var n=this.getMessageHandlerKey(t);this.onMessageHandlers.events[n]?this.onMessageHandlers.emit(n,e):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",t,e):console.warn("colyseus.js: onMessage() not registered for type '".concat(t,"'."))},e.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},e.prototype.getMessageHandlerKey=function(t){switch(typeof t){case"function":return"$".concat(t._typeid);case"string":return t;case"number":return"i".concat(t);default:throw new Error("invalid message type.")}},e}(),U=function(t){function e(n,r){var i=t.call(this,n)||this;return i.code=r,Object.setPrototypeOf(i,e.prototype),i}return r(e,t),e}(Error),F="undefined"!=typeof window&&void 0!==(null===(k=null===window||void 0===window?void 0:window.location)||void 0===k?void 0:k.hostname)?"".concat(window.location.protocol.replace("http","ws"),"//").concat(window.location.hostname).concat(window.location.port&&":".concat(window.location.port)):"ws://127.0.0.1:2567",H=function(){function t(t){if(void 0===t&&(t=F),"string"==typeof t){var e=new URL(t),n="https:"===e.protocol||"wss:"===e.protocol,r=Number(e.port||(n?443:80));this.settings={hostname:e.hostname,pathname:"/"!==e.pathname?e.pathname:"",port:r,secure:n}}else void 0===t.port&&(t.port=t.secure?443:80),void 0===t.pathname&&(t.pathname=""),this.settings=t}return t.prototype.joinOrCreate=function(t,e,n){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",t,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.create=function(t,e,n){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.createMatchMakeRequest("create",t,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.join=function(t,e,n){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.createMatchMakeRequest("join",t,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.joinById=function(t,e,n){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.reconnect=function(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:if("string"==typeof t&&"string"==typeof e)throw new Error("DEPRECATED: .reconnect() now only accepts 'reconnectionToken' as argument.\nYou can get this token from previously connected `room.reconnectionToken`");return n=t.split(":"),r=n[0],i=n[1],[4,this.createMatchMakeRequest("reconnect",r,{reconnectionToken:i},e)];case 1:return[2,o.sent()]}}))}))},t.prototype.getAvailableRooms=function(t){return void 0===t&&(t=""),i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,l(this.getHttpEndpoint("".concat(t)),{headers:{Accept:"application/json"}})];case 1:return[2,e.sent().data]}}))}))},t.prototype.consumeSeatReservation=function(t,e,n){return i(this,void 0,void 0,(function(){var r,s,a,c=this;return o(this,(function(f){return(r=this.createRoom(t.room.name,e)).roomId=t.room.roomId,r.sessionId=t.sessionId,s={sessionId:r.sessionId},t.reconnectionToken&&(s.reconnectionToken=t.reconnectionToken),a=n||r,r.connect(this.buildEndpoint(t.room,s),t.devMode&&function(){return i(c,void 0,void 0,(function(){var n,s,c=this;return o(this,(function(f){return console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(128260)," Re-establishing connection with room id '").concat(r.roomId,"'...")),n=0,8,s=function(){return i(c,void 0,void 0,(function(){return o(this,(function(i){switch(i.label){case 0:n++,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.consumeSeatReservation(t,e,a)];case 2:return i.sent(),console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(9989)," Successfully re-established connection with room '").concat(r.roomId,"'")),[3,4];case 3:return i.sent(),n<8?(console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(128260)," retrying... (").concat(n," out of ").concat(8,")")),setTimeout(s,2e3)):console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(10060)," Failed to reconnect. Is your server running? Please check server logs.")),[3,4];case 4:return[2]}}))}))},setTimeout(s,2e3),[2]}))}))},a),[2,new Promise((function(t,e){var n=function(t,n){return e(new m(t,n))};a.onError.once(n),a.onJoin.once((function(){a.onError.remove(n),t(a)}))}))]}))}))},t.prototype.createMatchMakeRequest=function(t,e,n,r,s){return void 0===n&&(n={}),i(this,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:return[4,v(this.getHttpEndpoint("".concat(t,"/").concat(e)),{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if((i=o.sent().data).error)throw new U(i.error,i.code);return"reconnect"===t&&(i.reconnectionToken=n.reconnectionToken),[4,this.consumeSeatReservation(i,r,s)];case 2:return[2,o.sent()]}}))}))},t.prototype.createRoom=function(t,e){return new j(t,e)},t.prototype.buildEndpoint=function(t,e){void 0===e&&(e={});var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push("".concat(r,"=").concat(e[r]));var i=this.settings.secure?"wss://":"ws://";return t.publicAddress?i+="".concat(t.publicAddress):i+="".concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname),"".concat(i,"/").concat(t.processId,"/").concat(t.roomId,"?").concat(n.join("&"))},t.prototype.getHttpEndpoint=function(t){return void 0===t&&(t=""),"".concat(this.settings.secure?"https":"http","://").concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname,"/matchmake/").concat(t)},t.prototype.getEndpointPort=function(){return 80!==this.settings.port&&443!==this.settings.port?":".concat(this.settings.port):""},t}();function B(){return M||(M="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(t,e){this.cache[t]=e},getItem:function(t){this.cache[t]},removeItem:function(t){delete this.cache[t]}}),M}var V,z="colyseus-auth-token";t.Platform=void 0,(V=t.Platform||(t.Platform={})).ios="ios",V.android="android";var J=function(){function t(t){var e,n,r,i=this;this._id=void 0,this.username=void 0,this.displayName=void 0,this.avatarUrl=void 0,this.isAnonymous=void 0,this.email=void 0,this.lang=void 0,this.location=void 0,this.timezone=void 0,this.metadata=void 0,this.devices=void 0,this.facebookId=void 0,this.twitterId=void 0,this.googleId=void 0,this.gameCenterId=void 0,this.steamId=void 0,this.friendIds=void 0,this.blockedUserIds=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.token=void 0,this.endpoint=t.replace("ws","http"),e=z,n=function(t){return i.token=t},r=B().getItem(e),"undefined"!=typeof Promise&&r instanceof Promise?r.then((function(t){return n(t)})):n(r)}return Object.defineProperty(t.prototype,"hasToken",{get:function(){return!!this.token},enumerable:!1,configurable:!0}),t.prototype.login=function(t){return void 0===t&&(t={}),i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(i){switch(i.label){case 0:return e=Object.assign({},t),this.hasToken&&(e.token=this.token),[4,this.request("post","/auth",e)];case 1:for(r in n=i.sent(),this.token=n.token,o=z,s=this.token,B().setItem(o,s),n)this.hasOwnProperty(r)&&(this[r]=n[r]);return this.registerPingService(),[2,this]}var o,s}))}))},t.prototype.save=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.request("put","/auth",{},{username:this.username,displayName:this.displayName,avatarUrl:this.avatarUrl,lang:this.lang,location:this.location,timezone:this.timezone})];case 1:return t.sent(),[2,this]}}))}))},t.prototype.getFriends=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.request("get","/friends/all")];case 1:return[2,t.sent()]}}))}))},t.prototype.getOnlineFriends=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.request("get","/friends/online")];case 1:return[2,t.sent()]}}))}))},t.prototype.getFriendRequests=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.request("get","/friends/requests")];case 1:return[2,t.sent()]}}))}))},t.prototype.sendFriendRequest=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.request("post","/friends/requests",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.acceptFriendRequest=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.request("put","/friends/requests",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.declineFriendRequest=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.request("del","/friends/requests",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.blockUser=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.request("post","/friends/block",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.unblockUser=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.request("put","/friends/block",{userId:t})];case 1:return[2,e.sent()]}}))}))},t.prototype.request=function(t,e,n,r,s){return void 0===n&&(n={}),void 0===s&&(s={}),i(this,void 0,void 0,(function(){var i,a,c,f;return o(this,(function(o){switch(o.label){case 0:for(a in s.Accept="application/json",this.hasToken&&(s.Authorization="Bearer "+this.token),i=[],n)i.push("".concat(a,"=").concat(n[a]));return c=i.length>0?"?".concat(i.join("&")):"",f={headers:s},r&&(f.body=r),[4,g[t]("".concat(this.endpoint).concat(e).concat(c),f)];case 1:return[2,o.sent().data]}}))}))},t.prototype.logout=function(){var t;this.token=void 0,t=z,B().removeItem(t),this.unregisterPingService()},t.prototype.registerPingService=function(t){var e=this;void 0===t&&(t=15e3),this.unregisterPingService(),this.keepOnlineInterval=setInterval((function(){return e.request("get","/auth")}),t)},t.prototype.unregisterPingService=function(){clearInterval(this.keepOnlineInterval)},t}(),q=function(){function t(){}return t.prototype.setState=function(t){return this.state.decode(t)},t.prototype.getState=function(){return this.state},t.prototype.patch=function(t){return this.state.decode(t)},t.prototype.teardown=function(){var t,e;null===(e=null===(t=this.state)||void 0===t?void 0:t.$changes)||void 0===e||e.root.clearRefs()},t.prototype.handshake=function(t,e){this.state?(new L.Reflection).decode(t,e):this.state=L.Reflection.decode(t,e)},t}(),K=function(){function t(){}return t.prototype.setState=function(t){},t.prototype.getState=function(){return null},t.prototype.patch=function(t){},t.prototype.teardown=function(){},t.prototype.handshake=function(t){},t}();C("schema",q),C("none",K),t.Auth=J,t.Client=H,t.Room=j,t.SchemaSerializer=q,t.registerSerializer=C,Object.defineProperty(t,"__esModule",{value:!0})})),t("default",r.exports),r.exports.Protocol,r.exports.ErrorCode,r.exports.OPERATION,r.exports.ArraySchema,r.exports.CollectionSchema,r.exports.Context,r.exports.MapSchema,r.exports.Reflection,r.exports.ReflectionField,r.exports.ReflectionType,r.exports.Schema,r.exports.SchemaDefinition,r.exports.SetSchema,r.exports.decode,r.exports.defineTypes,r.exports.deprecated,r.exports.dumpChanges,r.exports.encode,r.exports.filter,r.exports.filterChildren,r.exports.hasFilter,r.exports.registerType,r.exports.type,r.exports.__esModule,r.exports.Platform,r.exports.Auth,r.exports.Client,r.exports.Room,r.exports.SchemaSerializer,r.exports.registerSerializer}),{})}}}));

System.register("chunks:///_virtual/colyseus.mjs_cjs=&original=.js",["./colyseus.js","./cjs-loader.mjs"],(function(e,s){var t,r;return{setters:[function(s){t=s.__cjsMetaURL;var r={};r.__cjsMetaURL=s.__cjsMetaURL,r.default=s.default,e(r)},function(e){r=e.default}],execute:function(){t||r.throwInvalidWrapper("./colyseus.js",s.meta.url),r.require(t)}}}));

System.register("chunks:///_virtual/ControlsButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./UIState.ts"],(function(t){var n,o,e,i,a,c,l,s,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,a=t.Node,c=t.Component},function(t){l=t.AudioManager},function(t){s=t.UIManager},function(t){r=t.UIState}],execute:function(){var u;o._RF.push({},"eeaa87MUX1Hna505/V4bC5o","ControlsButton",void 0);var h=e.ccclass;e.property,t("ControlsButton",h("ControlsButton")(u=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(i),this.clickCallback=function(t){l.inst.playOneShotUI("button_click"),s.inst.switchUIState(r.ControlsSettingsMenu)},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(i.EventType.CLICK,this.clickCallback),this.node.on(a.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(i.EventType.CLICK,this.clickCallback),this.node.off(a.EventType.MOUSE_ENTER,this.hoverCallback)},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/ControlsSettingsMenuBackButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./UIState.ts"],(function(t){var n,o,e,i,a,c,s,l,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,a=t.Node,c=t.Component},function(t){s=t.AudioManager},function(t){l=t.UIManager},function(t){r=t.UIState}],execute:function(){var u;o._RF.push({},"e36351awYNBkqPD7VAATJhE","ControlsSettingsMenuBackButton",void 0);var h=e.ccclass;e.property,t("ControlsSettingsMenuBackButton",h("ControlsSettingsMenuBackButton")(u=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(i),this.clickCallback=function(t){s.inst.playOneShotUI("button_click"),l.inst.switchUIState(r.SettingsMenu)},this.hoverCallback=function(t){s.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(i.EventType.CLICK,this.clickCallback),this.node.on(a.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(i.EventType.CLICK,this.clickCallback),this.node.off(a.EventType.MOUSE_ENTER,this.hoverCallback)},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/CreateRoomButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./NetworkManager.ts"],(function(t){var o,n,e,a,i,c,r,l;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,a=t.Button,i=t.Node,c=t.Component},function(t){r=t.AudioManager},function(t){l=t.NetworkManager}],execute:function(){var s;n._RF.push({},"22883fUEwRMmqF0/E6MVoIM","CreateRoomButton",void 0);var u=e.ccclass;e.property,t("CreateRoomButton",u("CreateRoomButton")(s=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];return(o=t.call.apply(t,[this].concat(e))||this).button=void 0,o.clickCallback=void 0,o.hoverCallback=void 0,o}o(n,t);var e=n.prototype;return e.onLoad=function(){this.button=this.getComponent(a),this.clickCallback=function(t){r.inst.playOneShotUI("button_click"),l.inst.createRoom()},this.hoverCallback=function(t){r.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(a.EventType.CLICK,this.clickCallback),this.node.on(i.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(a.EventType.CLICK,this.clickCallback),this.node.off(i.EventType.MOUSE_ENTER,this.hoverCallback)},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DenyButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){var n,o,e,i,c,a,l;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,c=t.Node,a=t.Component},function(t){l=t.AudioManager}],execute:function(){var r;o._RF.push({},"837923opM1C/YM+HZ/gkshX","DenyButton",void 0);var s=e.ccclass;e.property,t("DenyButton",s("DenyButton")(r=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(i),this.clickCallback=function(t){l.inst.playOneShotUI("button_click")},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(i.EventType.CLICK,this.clickCallback),this.node.on(c.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(i.EventType.CLICK,this.clickCallback),this.node.off(c.EventType.MOUSE_ENTER,this.hoverCallback)},o}(a))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectsSlider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var t,s,o,i,f,l,c,n;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,o=e._decorator,i=e.Slider,f=e.find,l=e.Label,c=e.Component},function(e){n=e.AudioManager}],execute:function(){var r;s._RF.push({},"226f0c7Ua1FloGlJsz2zlYT","EffectsSlider",void 0);var u=o.ccclass;o.property,e("EffectsSlider",u("EffectsSlider")(r=function(e){function s(){for(var t,s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).effectsSliderNode=void 0,t.effectsSlider=void 0,t.effectsVolumeValueNode=void 0,t.effectsVolumeValue=void 0,t}t(s,e);var o=s.prototype;return o.onLoad=function(){this.effectsSliderNode=this.node.getChildByName("EffectsSlider"),this.effectsSlider=this.effectsSliderNode.getComponent(i),this.effectsVolumeValueNode=f("EffectsVolumeLayout/EffectsVolumeLabel",this.node),this.effectsVolumeValue=this.effectsVolumeValueNode.getComponent(l),this.effectsSlider.progress=n.inst.getEffectsVolume,this.effectsVolumeValue.string=String(Math.round(100*this.effectsSlider.progress))},o.onEnable=function(){this.effectsSlider.node.on("slide",this.callback,this)},o.onDisable=function(){this.effectsSlider.node.off("slide",this.callback,this)},o.callback=function(e){this.effectsVolumeValue.string=String(Math.round(100*e.progress)),n.inst.setEffectsVolume(e.progress)},s}(c))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/EndGameScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./NetworkManager.ts","./GameManager.ts"],(function(e){var t,o,n,a,s,i,r,c,l,d,h,u;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,a=e.find,s=e.Label,i=e.Sprite,r=e.Button,c=e.Node,l=e.Component},function(e){d=e.AudioManager},function(e){h=e.NetworkManager},function(e){u=e.GameManager}],execute:function(){var v;o._RF.push({},"3f824+KY81GbYzhJbkR4SrZ","EndGameScreen",void 0);var m=n.ccclass;n.property,e("EndGameScreen",m("EndGameScreen")(v=function(e){function o(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).titleNode=void 0,t.title=void 0,t.avatarNode=void 0,t.avatar=void 0,t.usernameNode=void 0,t.username=void 0,t.scoresNode=void 0,t.scores=void 0,t.closeNode=void 0,t.closeButton=void 0,t.closeClickCallback=void 0,t.closeHoverCallback=void 0,t}t(o,e);var n=o.prototype;return n.onLoad=function(){var e=this;this.titleNode=a("EndGameScreenLayout/EndGameScreenLabel",this.node),this.title=this.titleNode.getComponent(s),this.avatarNode=a("EndGameScreenLayout/Avatar/AvatarSprite",this.node),this.avatar=this.avatarNode.getComponent(i),this.usernameNode=a("EndGameScreenLayout/UsernameLayout/Username",this.node),this.username=this.usernameNode.getComponent(s),this.scoresNode=a("EndGameScreenLayout/ScoresLayout/Scores",this.node),this.scores=this.scoresNode.getComponent(s),this.closeNode=a("EndGameScreenLayout/ButtonsLayout/CloseButton",this.node),this.closeButton=this.closeNode.getComponent(r),this.closeClickCallback=function(t){d.inst.playOneShotUI("button_click"),e.node.destroy()},this.closeHoverCallback=function(e){d.inst.playOneShotUI("button_hover")}},n.onEnable=function(){this.closeNode.on(r.EventType.CLICK,this.closeClickCallback),this.closeNode.on(c.EventType.MOUSE_ENTER,this.closeHoverCallback)},n.onDisable=function(){this.closeNode.off(r.EventType.CLICK,this.closeClickCallback),this.closeNode.off(c.EventType.MOUSE_ENTER,this.closeHoverCallback)},n.init=function(e){var t,o=h.inst.getGameRoom.sessionId,n=h.inst.getGameRoom.state.players.get(o).id;e.winner?n!=e.winner&&n!=e.loser?(t="GAME ENDED",d.inst.playOneShotUI("win")):e.winner===n?(t="YOU WON !",d.inst.playOneShotUI("win")):(t="YOU LOSE !",d.inst.playOneShotUI("lose")):(t="DRAW",d.inst.playOneShotUI("draw")),this.title.string=t,this.username.string=e.username,this.avatar.spriteFrame=u.inst.avatarCache.get(e.avatarUrl),this.scores.string=e.leftPlayerScore+" - "+e.rightPlayerScore},o}(l))||v);o._RF.pop()}}}));

System.register("chunks:///_virtual/EndGameScreenData.ts",["cc"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy,a=e._decorator}],execute:function(){var r;t._RF.push({},"c548fIJ3C1MIJ6zWRAzUHWZ","EndGameScreenData",void 0);var c=a.ccclass;e("EndGameScreenData",c("EndGameScreenData")(r=function(){this.username=void 0,this.avatarUrl=void 0,this.leftPlayerScore=void 0,this.rightPlayerScore=void 0,this.winner=void 0,this.loser=void 0})||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/EntityState.ts",["cc"],(function(t){var e,i,n;return{setters:[function(t){e=t.cclegacy,i=t.Vec3,n=t.Quat}],execute:function(){e._RF.push({},"012adv8WMNGA5ETjqwNrVeU","EntityState",void 0);t("EntityState",(function(){this.id="",this.position=new i,this.quaternion=new n,this.size=new i,this.velocity=new i,this.angularVelocity=new i}));e._RF.pop()}}}));

System.register("chunks:///_virtual/EntityType.ts",["cc"],(function(t){var l;return{setters:[function(t){l=t.cclegacy}],execute:function(){l._RF.push({},"7c1dcimCc5Gn5rQI91H4K3n","EntityType",void 0);t("EntityType",function(t){return t[t.TopWall=1]="TopWall",t[t.BottomWall=2]="BottomWall",t[t.LeftWall=3]="LeftWall",t[t.RightWall=4]="RightWall",t[t.LeftPaddle=5]="LeftPaddle",t[t.RightPaddle=6]="RightPaddle",t[t.Ball=7]="Ball",t[t.Default=8]="Default",t}({}));l._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkManager.ts","./EntityType.ts","./WorldEntity.ts","./Keybinds.ts","./GameState.ts","./AudioManager.ts","./Inputs.ts"],(function(e){var t,i,o,r,a,s,n,l,h,d,c,y,u,m,g,p,f,v,P,S;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator,r=e.director,a=e.Camera,s=e.Canvas,n=e.Sprite,l=e.find,h=e.AnimationComponent,d=e.Label,c=e.input,y=e.Input,u=e.Component},function(e){m=e.NetworkManager},function(e){g=e.EntityType},function(e){p=e.WorldEntity},function(e){f=e.Bind},function(e){v=e.GameState},function(e){P=e.AudioManager},function(e){S=e.Inputs}],execute:function(){var N;i._RF.push({},"69eefqX8zBBkJ/Er9jvOV6j","Game",void 0);var b=o.ccclass;o.property,e("Game",b("Game")(N=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).cameraNode=void 0,t.camera=void 0,t.canvas=void 0,t.backgroundNode=void 0,t.background=void 0,t.hud=void 0,t.paddleId=void 0,t.lastServerTick=void 0,t.keybinds=new Map,t.inputs=new S,t.previousInputs=void 0,t.scoreFrameNode=void 0,t.scoreFrameAnimation=void 0,t.scoreVisible=!1,t.scoreSlideOutTimeout=void 0,t.leftPlayerAvatarNode=void 0,t.leftPlayerAvatar=void 0,t.leftPlayerUsernameNode=void 0,t.leftPlayerUsername=void 0,t.leftPlayerScoreNode=void 0,t.leftPlayerScore=void 0,t.leftPlayerScoreAnimation=void 0,t.rightPlayerAvatarNode=void 0,t.rightPlayerAvatar=void 0,t.rightPlayerUsernameNode=void 0,t.rightPlayerUsername=void 0,t.rightPlayerScoreNode=void 0,t.rightPlayerScore=void 0,t.rightPlayerScoreAnimation=void 0,t.topWall=void 0,t.bottomWall=void 0,t.leftWall=void 0,t.rightWall=void 0,t.leftPaddle=void 0,t.rightPaddle=void 0,t.ball=void 0,t.entities=void 0,t.leftScore=void 0,t.rightScore=void 0,t}t(i,e);var o=i.prototype;return o.onLoad=function(){this.cameraNode=r.getScene().getChildByName("GameCamera"),this.camera=this.cameraNode.getComponent(a),this.canvas=this.node.getComponent(s),this.backgroundNode=this.node.getChildByName("GameBackground"),this.background=this.backgroundNode.getComponent(n),this.hud=this.node.getChildByName("GameHUD"),this.hideHUD(),this.scoreFrameNode=l("GameHUD/ScoreLayout/ScoreFrameLayout",this.node),this.scoreFrameAnimation=this.scoreFrameNode.getComponent(h),this.leftPlayerAvatarNode=l("LeftPlayerLayout/Avatar",this.scoreFrameNode),this.leftPlayerAvatarNode=l("LeftPlayerLayout/Avatar",this.scoreFrameNode),this.leftPlayerAvatar=this.leftPlayerAvatarNode.getComponent(n),this.leftPlayerUsernameNode=l("LeftPlayerLayout/UsernameLayout/Username",this.scoreFrameNode),this.leftPlayerUsername=this.leftPlayerUsernameNode.getComponent(d),this.leftPlayerScoreNode=l("ScoreValueLayout/ScoreLeft",this.scoreFrameNode),this.leftPlayerScore=this.leftPlayerScoreNode.getComponent(d),this.leftPlayerScoreAnimation=this.leftPlayerScoreNode.getComponent(h),this.rightPlayerAvatarNode=l("RightPlayerLayout/Avatar",this.scoreFrameNode),this.rightPlayerAvatar=this.rightPlayerAvatarNode.getComponent(n),this.rightPlayerUsernameNode=l("RightPlayerLayout/UsernameLayout/Username",this.scoreFrameNode),this.rightPlayerUsername=this.rightPlayerUsernameNode.getComponent(d),this.rightPlayerScoreNode=l("ScoreValueLayout/ScoreRight",this.scoreFrameNode),this.rightPlayerScore=this.rightPlayerScoreNode.getComponent(d),this.rightPlayerScoreAnimation=this.rightPlayerScoreNode.getComponent(h),this.leftScore=0,this.rightScore=0,this.entities=new Map,this.previousInputs={upward:!1,downward:!1,powerup:!1}},o.onEnable=function(){c.on(y.EventType.KEY_DOWN,this.onKeyDown,this),c.on(y.EventType.KEY_UP,this.onKeyUp,this)},o.onDisable=function(){c.off(y.EventType.KEY_DOWN,this.onKeyDown,this),c.off(y.EventType.KEY_UP,this.onKeyUp,this)},o.update=function(e){if(m.inst&&m.inst.getGameRoom&&m.inst.getGameRoom.state.gameState===v.Playing){this.entities&&this.entities.forEach((function(e){e.updateState()}));var t=this.inputs.getInputs;if(!this.inputs.compare(this.previousInputs)){this.previousInputs=t,m.inst.sendInputs(t);var i=this.entities.get(this.paddleId);i&&i.moveInputs(t)}}},o.instantiateEntity=function(e){var t=new p(e,e.id,this.node);switch(e.entityType){case g.TopWall:this.topWall=t;break;case g.BottomWall:this.bottomWall=t;break;case g.LeftWall:this.leftWall=t;break;case g.RightWall:this.rightWall=t;break;case g.LeftPaddle:this.leftPaddle=t,m.inst.getGameRoom.sessionId===m.inst.getGameRoom.state.leftPlayer&&(this.paddleId=t.id);break;case g.RightPaddle:this.rightPaddle=t,m.inst.getGameRoom.sessionId===m.inst.getGameRoom.state.rightPlayer&&(this.paddleId=t.id);break;case g.Ball:this.ball=t}return this.entities.set(e.id,t),t},o.destroyEntity=function(e){if(this.entities){var t=this.entities.get(e);t&&t.destroy(),this.entities.delete(e)}else{var i=this.node.getChildByName(e);i&&i.destroy()}},o.updateKeybinds=function(e){this.keybinds=e},o.onKeyDown=function(e){switch(e.keyCode){case this.keybinds.get(f.Upward):this.inputs.setKeyDown(f.Upward);break;case this.keybinds.get(f.Downward):this.inputs.setKeyDown(f.Downward);break;case this.keybinds.get(f.Powerup):this.inputs.setKeyDown(f.Powerup)}},o.onKeyUp=function(e){switch(e.keyCode){case this.keybinds.get(f.Upward):this.inputs.setKeyUp(f.Upward);break;case this.keybinds.get(f.Downward):this.inputs.setKeyUp(f.Downward);break;case this.keybinds.get(f.Powerup):this.inputs.setKeyUp(f.Powerup)}},o.setBackground=function(e){null!=e&&(this.background.spriteFrame=e)},o.setLeftPlayer=function(e,t){null!=e&&(this.leftPlayerAvatar.spriteFrame=e),null!=t&&(this.leftPlayerUsername.string=t)},o.setRightPlayer=function(e,t){null!=e&&(this.rightPlayerAvatar.spriteFrame=e),null!=t&&(this.rightPlayerUsername.string=t)},o.updateLeftScore=function(){this.leftPlayerScore&&(this.leftPlayerScore.string=String(this.leftScore))},o.updateRightScore=function(){this.rightPlayerScore&&(this.rightPlayerScore.string=String(this.rightScore))},o.setScores=function(e,t){this.leftScore=e,this.rightScore=t,this.leftPlayerAvatar&&e&&(this.leftPlayerScore.string=String(e)),this.rightPlayerScore&&t&&(this.rightPlayerScore.string=String(t))},o.showScores=function(e,t){var i=this;!this.scoreFrameAnimation||this.scoreVisible||this.scoreFrameAnimation.getState("scoresSlideIn").isPlaying||(this.scoreFrameAnimation.play("scoresSlideIn"),this.scoreVisible=!0),e!=this.leftScore&&(this.leftScore=e,setTimeout((function(){i.leftPlayerScoreAnimation&&(P.inst.playOneShotUI("score"),i.leftPlayerScoreAnimation.play("scoresLeftBlink"))}),150)),t!=this.rightScore&&(this.rightScore=t,setTimeout((function(){i.rightPlayerScoreAnimation&&(P.inst.playOneShotUI("score"),i.rightPlayerScoreAnimation.play("scoresRightBlink"))}),150)),this.scoreSlideOutTimeout&&clearTimeout(this.scoreSlideOutTimeout),this.scoreSlideOutTimeout=setTimeout((function(){i.scoreFrameAnimation&&(i.scoreFrameAnimation.play("scoresSlideOut"),i.scoreVisible=!1)}),1500)},o.showHUD=function(){this.hud.active=!0},o.hideHUD=function(){this.hud.active=!1},o.enableCamera=function(){this.camera.enabled=!0},o.disableCamera=function(){this.camera.enabled=!1},i}(u))||N);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Keybinds.ts"],(function(e){var t,n,a,i,s,o,r,c,h,u,d,f,l,p;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy,a=e._decorator,i=e.ResolutionPolicy,s=e.view,o=e.resources,r=e.SpriteFrame,c=e.Prefab,h=e.Material,u=e.Node,d=e.director,f=e.physics,l=e.Vec3},function(e){p=e.Keybinds}],execute:function(){var m,v;n._RF.push({},"5fa65IIAL5Bdo5ycJquRBpL","GameManager",void 0);var y=a.ccclass;a.property,e("GameManager",y("GameManager")(((v=function(){function e(){this.node=void 0,this.maps=new Map,this.thumbnailCache=new Map,this.backgroundCache=new Map,this.musicCache=new Map,this.avatarCache=new Map,this.textureCache=new Map,this.prefabsCache=new Map,this.materialCache=new Map,this.game=void 0,this.cameraNode=void 0,this.camera=void 0,this.keybinds=void 0,this.node=new u,this.node.name="GameManager",this.keybinds=this.node.addComponent(p),d.getScene().addChild(this.node),d.addPersistRootNode(this.node),this.makeResponsive(),f.PhysicsSystem.instance.gravity=new l(0,0,0)}var n=e.prototype;return n.makeResponsive=function(){var e=new i(i.ContainerStrategy.PROPORTION_TO_FRAME,i.ContentStrategy.EXACT_FIT);s.setResolutionPolicy(e)},n.loadResources=function(){o.loadDir("game",(function(t,n){if(t)throw t;n.forEach((function(t){t instanceof r&&e.inst.textureCache.set(t.name,t)}))})),o.loadDir("prefabs",(function(t,n){if(t)throw t;n.forEach((function(t){t instanceof c&&e.inst.prefabsCache.set(t.name,t)}))})),o.loadDir("materials",(function(t,n){if(t)throw t;n.forEach((function(t){t instanceof h&&e.inst.materialCache.set(t.name,t)}))}))},t(e,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new e),this._inst}}]),e}())._inst=void 0,m=v))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameMap.ts",["cc"],(function(a){var i,t;return{setters:[function(a){i=a.cclegacy,t=a._decorator}],execute:function(){var c;i._RF.push({},"138e5Zzq61M1a2da/sm8cGr","GameMap",void 0);var e=t.ccclass;a("GameMap",e("GameMap")(c=function(){this.id=void 0,this.displayName=void 0,this.thumbnail=void 0,this.background=void 0,this.music=void 0})||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameSettings.ts",["cc"],(function(t){var e,c;return{setters:[function(t){e=t.cclegacy,c=t._decorator}],execute:function(){var s;e._RF.push({},"0517cbM+5hFv79fzWQjSWV9","GameSettings",void 0);var i=c.ccclass;t("GameSettings",i("GameSettings")(s=function(){this.musicVolume=0,this.effectsVolume=0,this.UIVolume=0})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameState.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3e86aoVGHdIGItzoqBDLsjd","GameState",void 0);t("GameState",{Lobby:1,Starting:2,PlayersLoading:3,StartAnimation:4,Playing:5,Paused:6,Ended:7});e._RF.pop()}}}));

System.register("chunks:///_virtual/Initialize.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./UIManager.ts","./AudioManager.ts","./NetworkManager.ts","./UIState.ts"],(function(e){var n,t,a,r,i,o,s,c,u,l,d,g,p;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){r=e.cclegacy,i=e._decorator,o=e.Component,s=e.director,c=e.Canvas},function(e){u=e.GameManager},function(e){l=e.UIManager},function(e){d=e.AudioManager},function(e){g=e.NetworkManager},function(e){p=e.UIState}],execute:function(){var f;r._RF.push({},"58054fzT+FC/KBTBDPmpNps","Initialize",void 0);var M=i.ccclass;i.property,e("Initialize",M("Initialize")(f=function(e){function r(){return e.apply(this,arguments)||this}return n(r,e),r.prototype.onLoad=function(){var e=t(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.inst.loadResources();case 3:return e.next=5,d.inst.loadResources();case 5:return e.next=7,l.inst.loadResources();case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),Error("Failed to load resource: "+e.t0);case 12:u.inst&&console.log("GameManager initialized"),l.inst&&console.log("UIManager initialized"),d.inst&&console.log("AudioManager initialized"),g.inst&&console.log("NetworkManager initialized"),s.loadScene("Menu",(function(){var e=s.getScene().getChildByName("UICanvas");s.addPersistRootNode(e),l.inst.setCanvas(e.getComponent(c)),l.inst.switchUIState(p.Menu),d.inst.play("menu"),g.inst.connect()}));case 17:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),r}(o))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/Inputs.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Keybinds.ts"],(function(r){var t,e,n,s;return{setters:[function(r){t=r.createClass},function(r){e=r.cclegacy,n=r._decorator},function(r){s=r.Bind}],execute:function(){var u;e._RF.push({},"4426c2C5wxLEYNKup7ptxAw","Inputs",void 0);var p=n.ccclass;r("Inputs",p("Inputs")(u=function(){function r(){this.upward=!1,this.downward=!1,this.powerup=!1}var e=r.prototype;return e.setKeyUp=function(r){switch(r){case s.Upward:this.upward=!1;break;case s.Downward:this.downward=!1;break;case s.Powerup:this.powerup=!1}},e.setKeyDown=function(r){switch(r){case s.Upward:this.upward=!0;break;case s.Downward:this.downward=!0;break;case s.Powerup:this.powerup=!0}},e.compare=function(r){return this.upward===r.upward&&this.downward===r.downward&&this.powerup===r.powerup},t(r,[{key:"getInputs",get:function(){return{upward:this.upward,downward:this.downward,powerup:this.powerup}}}]),r}())||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Invitation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./NetworkManager.ts"],(function(t){var e,n,o,a,i,c,s,d,r,l,v,u,h,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.find,i=t.Sprite,c=t.Label,s=t.Button,d=t.Node,r=t.assetManager,l=t.Texture2D,v=t.SpriteFrame,u=t.Component},function(t){h=t.AudioManager},function(t){p=t.NetworkManager}],execute:function(){var y;n._RF.push({},"d097af4YE1O15XV0bGRgEXK","Invitation",void 0);var C=o.ccclass;o.property,t("Invitation",C("Invitation")(y=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).id=void 0,e.avatarNode=void 0,e.avatar=void 0,e.usernameNode=void 0,e.username=void 0,e.acceptNode=void 0,e.acceptButton=void 0,e.denyNode=void 0,e.denyButton=void 0,e.playersOnlineNode=void 0,e.playersOnline=void 0,e.acceptClickCallback=void 0,e.denyClickCallback=void 0,e.acceptHoverCallback=void 0,e.denyHoverCallback=void 0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){var t=this;this.avatarNode=a("InvitationLayout/Avatar/AvatarSprite",this.node),this.avatar=this.avatarNode.getComponent(i),this.usernameNode=a("InvitationLayout/TitleLayout/Username",this.node),this.username=this.usernameNode.getComponent(c),this.acceptNode=a("InvitationLayout/ButtonsLayout/AcceptButton",this.node),this.acceptButton=this.acceptNode.getComponent(s),this.denyNode=a("InvitationLayout/ButtonsLayout/DenyButton",this.node),this.denyButton=this.denyNode.getComponent(s),this.acceptClickCallback=function(e){h.inst.playOneShotUI("button_click"),p.inst.acceptInvitation(t.id),t.node.destroy()},this.denyClickCallback=function(e){h.inst.playOneShotUI("button_click"),p.inst.declineInvitation(t.id),t.node.destroy()},this.acceptHoverCallback=function(t){h.inst.playOneShotUI("button_hover")},this.denyHoverCallback=function(t){h.inst.playOneShotUI("button_hover")}},o.onEnable=function(){this.acceptNode.on(s.EventType.CLICK,this.acceptClickCallback),this.denyNode.on(s.EventType.CLICK,this.denyClickCallback),this.acceptNode.on(d.EventType.MOUSE_ENTER,this.acceptHoverCallback),this.denyNode.on(d.EventType.MOUSE_ENTER,this.denyHoverCallback)},o.onDisable=function(){this.acceptNode.off(s.EventType.CLICK,this.acceptClickCallback),this.denyNode.off(s.EventType.CLICK,this.denyClickCallback),this.acceptNode.off(d.EventType.MOUSE_ENTER,this.acceptHoverCallback),this.denyNode.off(d.EventType.MOUSE_ENTER,this.denyHoverCallback)},o.init=function(t,e,n){var o=this;this.id=t,this.username.string=e,r.loadRemote(n+"?authorization="+p.inst.getAuthorization,(function(t,e){if(t)console.error("Failed to download avatar: "+n+" "+t);else if(e){console.debug("Downloaded avatar: "+n);var a=new l;a.image=e;var i=new v;i.texture=a,o.avatar.spriteFrame=i}})),this.node.active=!0,h.inst.playOneShotUI("invitation")},n}(u))||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/InvitationData.ts",["cc"],(function(t){var a,i;return{setters:[function(t){a=t.cclegacy,i=t._decorator}],execute:function(){var n;a._RF.push({},"066a88xcR5PDKAatvkGvfnk","InvitationData",void 0);var c=i.ccclass;t("InvitationData",c("InvitationData")(n=function(){this.id=void 0,this.username=void 0,this.avatarUrl=void 0})||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/Keybinds.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){var n,t,s,i,r,a,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,s=e._decorator,i=e.KeyCode,r=e.sys,a=e.Component},function(e){o=e.GameManager}],execute:function(){var d;t._RF.push({},"fb73fUI2gVLCYwLBvX96A1E","Keybinds",void 0);var u=s.ccclass,y=(s.property,e("Bind",function(e){return e[e.Upward=0]="Upward",e[e.Downward=1]="Downward",e[e.Powerup=2]="Powerup",e}({})));e("Keybinds",u("Keybinds")(d=function(e){function t(){for(var n,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return(n=e.call.apply(e,[this].concat(s))||this).keybinds=new Map,n}n(t,e);var s=t.prototype;return s.onLoad=function(){this.keybinds=this.loadKeybinds(),0===this.keybinds.size&&(this.keybinds.set(y.Upward,i.KEY_W),this.keybinds.set(y.Downward,i.KEY_S),this.keybinds.set(y.Powerup,i.KEY_D),this.saveKeybinds(),this.updateKeybinds())},s.setKeybind=function(e,n){this.keybinds.set(e,n),this.saveKeybinds()},s.getKeybind=function(e){return this.keybinds.get(e)},s.loadKeybinds=function(){var e=r.localStorage.getItem("keybinds");if(e){var n=JSON.parse(e),t=new Map;return Object.entries(n).forEach((function(e){var n=e[0],s=e[1];t.set(Number(n),s)})),t}return new Map},s.saveKeybinds=function(){var e=Object.fromEntries(this.keybinds);r.localStorage.setItem("keybinds",JSON.stringify(e)),this.updateKeybinds()},s.updateKeybinds=function(){o.inst.game&&o.inst.game.updateKeybinds(this.keybinds)},t}(a))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/LeaveRoomButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./NetworkManager.ts"],(function(t){var o,n,e,a,i,c,l,r;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,a=t.Button,i=t.Node,c=t.Component},function(t){l=t.AudioManager},function(t){r=t.NetworkManager}],execute:function(){var u;n._RF.push({},"fc7fdyipDlH8aICBjuRTHjz","LeaveRoomButton",void 0);var s=e.ccclass;e.property,t("LeaveRoomButton",s("LeaveRoomButton")(u=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];return(o=t.call.apply(t,[this].concat(e))||this).button=void 0,o.clickCallback=void 0,o.hoverCallback=void 0,o}o(n,t);var e=n.prototype;return e.onLoad=function(){this.button=this.getComponent(a),this.clickCallback=function(t){l.inst.playOneShotUI("button_click"),r.inst.leaveRoom()},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(a.EventType.CLICK,this.clickCallback),this.node.on(i.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(a.EventType.CLICK,this.clickCallback),this.node.off(i.EventType.MOUSE_ENTER,this.hoverCallback)},e.setInteractable=function(t){this.button.interactable=t},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Lerp.ts",["cc"],(function(r){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"7bc9fKzPoVAXZRJ7wBOTDZC","Lerp",void 0);var n=3.14159265359,t=6.28318530718,c=r("lerp",(function(r,e,n){return r+(e-r)*n}));r("degreeLerp",(function(r,e,n){var t,u=e-r;return u<-180?(t=c(r,e+=360,n))>=360&&(t-=360):u>180?(t=c(r,e-=360,n))<0&&(t+=360):t=c(r,e,n),t})),r("radianLerp",(function(r,e,u){var i,o=e-r;return o<-n?(i=c(r,e+=t,u))>=t&&(i-=t):o>n?(i=c(r,e-=t,u))<0&&(i+=t):i=c(r,e,u),i}));e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkManager.ts","./GameManager.ts"],(function(n){var i,o,t,e,a,d,s,r,l,u;return{setters:[function(n){i=n.inheritsLoose},function(n){o=n.cclegacy,t=n._decorator,e=n.Sprite,a=n.find,d=n.Label,s=n.AnimationComponent,r=n.Component},function(n){l=n.NetworkManager},function(n){u=n.GameManager}],execute:function(){var h;o._RF.push({},"4cb08CJQw1Nlqna7k57DwUT","LoadingScreen",void 0);var p=t.ccclass;t.property,n("LoadingScreen",p("LoadingScreen")(h=function(n){function o(){for(var i,o=arguments.length,t=new Array(o),e=0;e<o;e++)t[e]=arguments[e];return(i=n.call.apply(n,[this].concat(t))||this).background=void 0,i.thumbnailNode=void 0,i.thumbnailSprite=void 0,i.displayNameNode=void 0,i.displayNameLabel=void 0,i.loadingInfoNode=void 0,i.loadingInfoLabel=void 0,i.animation=void 0,i.spinnerNode=void 0,i}i(o,n);var t=o.prototype;return t.onLoad=function(){this.background=this.node.getComponent(e),this.thumbnailNode=a("LoadingLayout/MapLayout/Thumbnail",this.node),this.thumbnailSprite=this.thumbnailNode.getComponent(e),this.displayNameNode=a("LoadingLayout/MapLayout/DisplayName",this.node),this.displayNameLabel=this.displayNameNode.getComponent(d),this.loadingInfoNode=a("LoadingLayout/LoadingLayout/TextLayout/LoadingInfo",this.node),this.loadingInfoLabel=this.loadingInfoNode.getComponent(d),this.spinnerNode=a("LoadingLayout/LoadingLayout/SpinnerLayout/Spinner",this.node),this.animation=this.node.getComponent(s)},t.onEnable=function(){this.animation.play()},t.update=function(n){this.spinnerNode.angle+=5},t.show=function(){this.enabled=!0,this.node.active=!0;var n=l.inst.getSelectedMap;if(n>-1){var i=u.inst.maps.get(n);i&&(this.displayNameLabel.string=i.displayName,i.background&&(this.background.spriteFrame=i.background),i.thumbnail&&(this.thumbnailSprite.spriteFrame=i.thumbnail))}},t.hide=function(){this.enabled=!1,this.node.active=!1},t.setLoadingInfo=function(n){this.loadingInfoLabel.string=n},o}(r))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./EndGameScreenData.ts","./EntityState.ts","./GameMap.ts","./GameSettings.ts","./Inputs.ts","./InvitationData.ts","./Keybinds.ts","./Lerp.ts","./MapData.ts","./WorldEntity.ts","./BodyType.ts","./EntityType.ts","./GameState.ts","./PaddleState.ts","./ShapeType.ts","./UIState.ts","./Game.ts","./Initialize.ts","./AudioManager.ts","./GameManager.ts","./NetworkManager.ts","./UIManager.ts","./AudioSettingsMenuBackButton.ts","./EffectsSlider.ts","./MusicSlider.ts","./UISlider.ts","./ScrollingParallax.ts","./ControlsSettingsMenuBackButton.ts","./MoveDownwardControlButton.ts","./MoveUpwardControlButton.ts","./PowerupControlButton.ts","./EndGameScreen.ts","./Score.ts","./AcceptButton.ts","./DenyButton.ts","./Invitation.ts","./LoadingScreen.ts","./CancelButton.ts","./MatchmakingMenu.ts","./PlayButton.ts","./SettingsButton.ts","./NetworkError.ts","./Notification.ts","./StatusBox.ts","./CreateRoomButton.ts","./MatchmakingButton.ts","./PlayMenuBackButton.ts","./PressAnyKeyScreen.ts","./LeaveRoomButton.ts","./MapItem.ts","./MapsScrollView.ts","./PlayerItem.ts","./PlayersScrollView.ts","./ReadyButton.ts","./AudioButton.ts","./ControlsButton.ts","./SettingsMenuBackButton.ts","./ButtonScaler.ts","./CalculateLevel.ts","./colyseus.mjs_cjs=&original=.js"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MapData.ts",["cc"],(function(t){var a,i;return{setters:[function(t){a=t.cclegacy,i=t._decorator}],execute:function(){var c;a._RF.push({},"de1d8Zb10tPFpsNc/P1SXfb","MapData",void 0);var s=i.ccclass;t("MapData",s("MapData")(c=function(){this.id=void 0,this.displayName=void 0,this.thumbnailUrl=void 0,this.backgroundUrl=void 0,this.musicUrl=void 0})||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/MapItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./NetworkManager.ts"],(function(t){var e,n,o,i,a,c,s,l,h,p,d;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Button,a=t.find,c=t.Sprite,s=t.Label,l=t.Node,h=t.Component},function(t){p=t.AudioManager},function(t){d=t.NetworkManager}],execute:function(){var r;n._RF.push({},"6926fgDx/NDpohaOGGiCy/r","MapItem",void 0);var u=o.ccclass;o.property,t("MapItem",u("MapItem")(r=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).id=void 0,e.mapThumbnailNode=void 0,e.mapThumbnail=void 0,e.mapNameNode=void 0,e.mapName=void 0,e.mapSelectedNode=void 0,e.button=void 0,e.clickCallback=void 0,e.hoverCallback=void 0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){var t=this;this.button=this.node.getComponent(i),this.mapThumbnailNode=a("MapThumbnail",this.node),this.mapThumbnail=this.mapThumbnailNode.getComponent(c),this.mapNameNode=a("MapNameLayout/MapName",this.node),this.mapName=this.mapNameNode.getComponent(s),this.mapSelectedNode=a("MapSelected",this.node),this.clickCallback=function(e){p.inst.playOneShotUI("button_click"),d.inst.setSelectedMap(t.id)},this.hoverCallback=function(t){p.inst.playOneShotUI("button_hover")}},o.onEnable=function(){this.node.on(i.EventType.CLICK,this.clickCallback),this.node.on(l.EventType.MOUSE_ENTER,this.hoverCallback)},o.onDisable=function(){this.node.off(i.EventType.CLICK,this.clickCallback),this.node.off(l.EventType.MOUSE_ENTER,this.hoverCallback)},o.setId=function(t){this.id=t},o.setThumbnail=function(t){this.mapThumbnail.spriteFrame=t},o.setName=function(t){this.mapName.string=t},o.setSelected=function(t){this.mapSelectedNode.active=!!t},o.getId=function(){return this.id},n}(h))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/MapsScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./MapItem.ts","./GameManager.ts","./NetworkManager.ts"],(function(e){var t,n,a,o,i,r,c,l,s,u,d,m,h;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,o=e.find,i=e.instantiate,r=e.assetManager,c=e.Texture2D,l=e.SpriteFrame,s=e.Component},function(e){u=e.UIManager},function(e){d=e.MapItem},function(e){m=e.GameManager},function(e){h=e.NetworkManager}],execute:function(){var g;n._RF.push({},"b1047sMGBFLuq5tCOX/odsi","MapsScrollView",void 0);var b=a.ccclass;a.property,e("MapsScrollView",b("MapsScrollView")(g=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).contentNode=void 0,t.mapItemPrefab=void 0,t}t(n,e);var a=n.prototype;return a.onLoad=function(){this.contentNode=o("view/content",this.node),this.mapItemPrefab=u.inst.prefabs.get("MapItem")},a.addMap=function(e){var t={id:e.id,displayName:e.displayName};m.inst.maps.set(e.id,t);var n=i(this.mapItemPrefab);n.layer=1<<17,n.parent=this.contentNode;var a=n.getComponent(d);a.setId(t.id),a.setName(t.displayName);var o=m.inst.thumbnailCache.get(e.thumbnailUrl);o?(console.debug("Using cached thumbnail: "+e.thumbnailUrl),t.thumbnail=o,a.setThumbnail(t.thumbnail)):r.loadRemote(e.thumbnailUrl+"?authorization="+h.inst.getAuthorization,(function(n,o){if(n)console.error("Failed to download thumbnail: "+e.thumbnailUrl+" "+n);else if(o){console.debug("Downloaded thumbnail: "+e.thumbnailUrl);var i=new c;i.image=o;var r=new l;r.texture=i,t.thumbnail=r,a.setThumbnail(t.thumbnail),m.inst.thumbnailCache.set(e.thumbnailUrl,r)}}));var s=m.inst.backgroundCache.get(e.backgroundUrl);s?(console.debug("Using cached background: "+e.thumbnailUrl),t.background=s):r.loadRemote(e.backgroundUrl+"?authorization="+h.inst.getAuthorization,(function(n,a){if(n)console.error("Failed to download background: "+e.backgroundUrl+" "+n);else if(a){console.debug("Downloaded background: "+e.backgroundUrl);var o=new c;o.image=a;var i=new l;i.texture=o,t.background=i,m.inst.backgroundCache.set(e.backgroundUrl,i)}}));var u=m.inst.musicCache.get(e.musicUrl);u?(console.debug("Using cached music: "+e.thumbnailUrl),t.music=u):r.loadRemote(e.musicUrl+"?authorization="+h.inst.getAuthorization,(function(n,a){n?console.error("Failed to download music: "+e.musicUrl+" "+n):a&&(console.debug("Downloaded music: "+e.musicUrl),t.music=a,m.inst.musicCache.set(e.musicUrl,a))}))},a.clearMaps=function(){this.contentNode&&(this.contentNode.destroyAllChildren(),m.inst.maps.clear())},a.setSelectedMap=function(e){this.contentNode.children.forEach((function(t){var n=t.getComponent(d);n.getId()===e?n.setSelected(!0):n.setSelected(!1)}))},n}(s))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/MatchmakingButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./NetworkManager.ts"],(function(t){var n,o,e,a,i,c,l,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,a=t.Button,i=t.Node,c=t.Component},function(t){l=t.AudioManager},function(t){r=t.NetworkManager}],execute:function(){var s;o._RF.push({},"8ebf0CO/klMF6Y4q/CecPGk","MatchmakingButton",void 0);var u=e.ccclass;e.property,t("MatchmakingButton",u("MatchmakingButton")(s=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(a),this.clickCallback=function(t){l.inst.playOneShotUI("button_click"),r.inst.joinMatchmaking()},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(a.EventType.CLICK,this.clickCallback),this.node.on(i.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(a.EventType.CLICK,this.clickCallback),this.node.off(i.EventType.MOUSE_ENTER,this.hoverCallback)},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/MatchmakingMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NetworkManager.ts"],(function(e){var n,t,s,i,o,a,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,s=e._decorator,i=e.find,o=e.Label,a=e.Component},function(e){r=e.NetworkManager}],execute:function(){var c;t._RF.push({},"01ac9ASH2xLEZybJ5kNAdme","MatchmakingMenu",void 0);var g=s.ccclass;s.property,e("MatchmakingMenu",g("MatchmakingMenu")(c=function(e){function t(){for(var n,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return(n=e.call.apply(e,[this].concat(s))||this).spinnerNode=void 0,n.messageNode=void 0,n.message=void 0,n.onlineUsers=void 0,n}n(t,e);var s=t.prototype;return s.onLoad=function(){this.spinnerNode=i("MatchmakingLayout/TitleLayout/SearchingLayout/SpinnerLayout/Spinner",this.node),this.messageNode=i("MatchmakingLayout/TitleLayout/Message",this.node),this.message=this.messageNode.getComponent(o)},s.start=function(){this.onlineUsers=r.inst.getOnlineUsers,this.message.string=String(this.onlineUsers)+" players online"},s.update=function(e){this.spinnerNode.angle+=5,r.inst.getOnlineUsers!=this.onlineUsers&&(this.onlineUsers=r.inst.getOnlineUsers,this.message.string=String(this.onlineUsers)+" players online")},t}(a))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/MoveDownwardControlButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./Keybinds.ts","./GameManager.ts"],(function(t){var n,o,e,i,a,r,d,l,s,c,u,b;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,a=t.Label,r=t.Node,d=t.KeyCode,l=t.Component},function(t){s=t.AudioManager},function(t){c=t.UIManager},function(t){u=t.Bind},function(t){b=t.GameManager}],execute:function(){var h;o._RF.push({},"d598cM7ZFRKoISwxWvINdVf","MoveDownwardControlButton",void 0);var v=e.ccclass;e.property,t("MoveDownwardControlButton",v("MoveDownwardControlButton")(h=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).buttonNode=void 0,n.button=void 0,n.keybindNode=void 0,n.keybindLabel=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n.keybindCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){var t=this;this.buttonNode=this.node.getChildByName("MoveDownwardControlButton"),this.button=this.buttonNode.getComponent(i),this.keybindNode=this.buttonNode.getChildByName("Label"),this.keybindLabel=this.keybindNode.getComponent(a),this.updateKeybindLabel(b.inst.keybinds.getKeybind(u.Downward)),this.clickCallback=function(n){s.inst.playOneShotUI("button_click"),c.inst.pressAnyKeyScreen.show(u.Downward,t.updateKeybindLabel.bind(t))},this.hoverCallback=function(t){s.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.buttonNode.on(i.EventType.CLICK,this.clickCallback),this.buttonNode.on(r.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.buttonNode.off(i.EventType.CLICK,this.clickCallback),this.buttonNode.off(r.EventType.MOUSE_ENTER,this.hoverCallback)},e.updateKeybindLabel=function(t){var n=d[t];n.startsWith("KEY_")&&(n=n.substring(4)),n=n.replace(/_/g," "),this.keybindLabel.string=n},o}(l))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/MoveUpwardControlButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./Keybinds.ts","./GameManager.ts"],(function(t){var n,e,o,i,a,r,l,s,c,d,u,b;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Button,a=t.Label,r=t.Node,l=t.KeyCode,s=t.Component},function(t){c=t.AudioManager},function(t){d=t.UIManager},function(t){u=t.Bind},function(t){b=t.GameManager}],execute:function(){var h;e._RF.push({},"1c67cFXiW9DcZMMwe8MnNTA","MoveUpwardControlButton",void 0);var p=o.ccclass;o.property,t("MoveUpwardControlButton",p("MoveUpwardControlButton")(h=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).buttonNode=void 0,n.button=void 0,n.keybindNode=void 0,n.keybindLabel=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n.keybindCallback=void 0,n}n(e,t);var o=e.prototype;return o.onLoad=function(){var t=this;this.buttonNode=this.node.getChildByName("MoveUpwardControlButton"),this.button=this.buttonNode.getComponent(i),this.keybindNode=this.buttonNode.getChildByName("Label"),this.keybindLabel=this.keybindNode.getComponent(a),this.updateKeybindLabel(b.inst.keybinds.getKeybind(u.Upward)),this.clickCallback=function(n){c.inst.playOneShotUI("button_click"),d.inst.pressAnyKeyScreen.show(u.Upward,t.updateKeybindLabel.bind(t))},this.hoverCallback=function(t){c.inst.playOneShotUI("button_hover")}},o.onEnable=function(){this.buttonNode.on(i.EventType.CLICK,this.clickCallback),this.buttonNode.on(r.EventType.MOUSE_ENTER,this.hoverCallback)},o.onDisable=function(){this.buttonNode.off(i.EventType.CLICK,this.clickCallback),this.buttonNode.off(r.EventType.MOUSE_ENTER,this.hoverCallback)},o.updateKeybindLabel=function(t){var n=l[t];n.startsWith("KEY_")&&(n=n.substring(4)),n=n.replace(/_/g," "),this.keybindLabel.string=n},e}(s))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/MusicSlider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(i){var e,s,o,u,t,l,n,r;return{setters:[function(i){e=i.inheritsLoose},function(i){s=i.cclegacy,o=i._decorator,u=i.Slider,t=i.find,l=i.Label,n=i.Component},function(i){r=i.AudioManager}],execute:function(){var c;s._RF.push({},"f0d24uauIVFBYTt168QMibv","MusicSlider",void 0);var d=o.ccclass;o.property,i("MusicSlider",d("MusicSlider")(c=function(i){function s(){for(var e,s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];return(e=i.call.apply(i,[this].concat(o))||this).musicSliderNode=void 0,e.musicSlider=void 0,e.musicVolumeValueNode=void 0,e.musicVolumeValue=void 0,e}e(s,i);var o=s.prototype;return o.onLoad=function(){this.musicSliderNode=this.node.getChildByName("MusicSlider"),this.musicSlider=this.musicSliderNode.getComponent(u),this.musicVolumeValueNode=t("MusicVolumeLayout/MusicVolumeLabel",this.node),this.musicVolumeValue=this.musicVolumeValueNode.getComponent(l),this.musicSlider.progress=r.inst.getMusicVolume,this.musicVolumeValue.string=String(Math.round(100*this.musicSlider.progress))},o.onEnable=function(){this.musicSlider.node.on("slide",this.callback,this)},o.onDisable=function(){this.musicSlider.node.off("slide",this.callback,this)},o.callback=function(i){this.musicVolumeValue.string=String(Math.round(100*i.progress)),r.inst.setMusicVolume(i.progress)},s}(n))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkError.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./NetworkManager.ts"],(function(t){var o,e,n,c,i,r,a,s,l,d;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,c=t.find,i=t.Button,r=t.Label,a=t.Node,s=t.Component},function(t){l=t.AudioManager},function(t){d=t.NetworkManager}],execute:function(){var u;e._RF.push({},"5cc37qFIGdItrC0fXUynW7n","NetworkError",void 0);var h=n.ccclass;n.property,t("NetworkError",h("NetworkError")(u=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),c=0;c<e;c++)n[c]=arguments[c];return(o=t.call.apply(t,[this].concat(n))||this).textNode=void 0,o.textLabel=void 0,o.reconnectNode=void 0,o.reconnectButton=void 0,o.clickCallback=void 0,o.hoverCallback=void 0,o.disconnectedFromGame=void 0,o}o(e,t);var n=e.prototype;return n.onLoad=function(){var t=this;this.reconnectNode=c("NotificationLayout/ButtonsLayout/ReconnectButton",this.node),this.reconnectButton=this.reconnectNode.getComponent(i),this.textNode=c("NotificationLayout/TitleLayout/Message",this.node),this.textLabel=this.textNode.getComponent(r),this.clickCallback=function(o){l.inst.playOneShotUI("button_click"),d.inst.reconnect(t.disconnectedFromGame),t.node.destroy()},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},n.onEnable=function(){this.reconnectNode.on(i.EventType.CLICK,this.clickCallback),this.reconnectNode.on(a.EventType.MOUSE_ENTER,this.hoverCallback)},n.onDisable=function(){this.reconnectNode.off(i.EventType.CLICK,this.clickCallback),this.reconnectNode.off(a.EventType.MOUSE_ENTER,this.hoverCallback)},n.init=function(t,o){this.disconnectedFromGame=o,this.textLabel.string=t,l.inst.playOneShotUI("error")},e}(s))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./colyseus.mjs_cjs=&original=.js","./GameManager.ts","./UIManager.ts","./UIState.ts","./Game.ts","./AudioManager.ts","./GameState.ts","./colyseus.js"],(function(e){var t,n,o,s,i,a,r,c,m,l,u,h,d,R,f;return{setters:[function(e){t=e.createClass,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,i=e._decorator,a=e.director,r=e.Canvas,c=e.Node},null,function(e){m=e.GameManager},function(e){l=e.UIManager},function(e){u=e.UIState},function(e){h=e.Game},function(e){d=e.AudioManager},function(e){R=e.GameState},function(e){f=e.default}],execute:function(){var y,g;s._RF.push({},"fe2a2o5gU9FbJYixhdA1LkW","NetworkManager",void 0);var b=i.ccclass;i.property,e("NetworkManager",b("NetworkManager")(((g=function(){function e(){this.node=void 0,this.hostname="127.0.0.1",this.port=3e3,this.useSSL=!1,this.accessToken="UNITY",this.reconnectionToken=void 0,this.authorization=void 0,this.client=void 0,this.LobbyRoom=void 0,this.GameRoom=void 0,this.startGameCallback=void 0,this.entitiesOnAddCallback=void 0,this.entitiesOnRemoveCallback=void 0,this.reconnecting=!1,this.node=new c,this.node.name="NetworkManager",a.getScene().addChild(this.node),a.addPersistRootNode(this.node),this.client=new f.Client((this.useSSL?"wss":"ws")+"://"+this.hostname+([443,80].includes(this.port)||this.useSSL?"":":"+this.port)+"/api")}var s=e.prototype;return s.connect=function(){var e=n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.LobbyRoom&&this.LobbyRoom.connection.isOpen){e.next=19;break}return e.prev=1,e.next=4,this.client.join("LobbyRoom",{accessToken:this.accessToken});case 4:this.LobbyRoom=e.sent,this.setLobbyRoomListeners(),this.reconnecting=!1,this.GameRoom&&this.GameRoom.connection.isOpen||l.inst.UIState!==u.RoomMenu||l.inst.switchUIState(u.PlayMenu),console.debug("Successfully joined LobbyRoom ("+this.LobbyRoom.id+")"),console.debug("Current sessionId : "+this.LobbyRoom.sessionId),l.inst.showStatus("You are now connected","Successfully joined lobby"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),l.inst.showNetworkError("Connection to the server lost. Do you want to try to reconnect?"),console.error(e.t0);case 17:e.next=20;break;case 19:l.inst.showNotification("Already connected to LobbyRoom");case 20:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),s.reconnect=function(){var e=n(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=!1),!t){e.next=8;break}return e.next=4,this.client.reconnect(this.reconnectionToken);case 4:this.GameRoom=e.sent,this.reconnectionToken=this.GameRoom.reconnectionToken,this.setGameRoomListeners(),this.setGameRoomWorldListeners();case 8:if(!this.LobbyRoom){e.next=14;break}if(this.LobbyRoom.connection.isOpen){e.next=12;break}return e.next=12,this.connect();case 12:e.next=16;break;case 14:return e.next=16,this.connect();case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.connectToGame=function(){var e=n(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=!1),e.prev=1,!n){e.next=8;break}return e.next=5,this.client.reconnect(this.reconnectionToken);case 5:this.GameRoom=e.sent,e.next=12;break;case 8:return e.next=10,this.client.consumeSeatReservation(t);case 10:this.GameRoom=e.sent,this.reconnectionToken=this.GameRoom.reconnectionToken;case 12:this.setGameRoomListeners(),l.inst.playersScrollView.clearPlayers(),console.debug("Successfully joined GameRoom ("+this.GameRoom.id+")"),l.inst.showStatus("You are now connected","Successfully joined game"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),"Game"===a.getScene().name?(this.removeGameRoomWorldListeners(),a.loadScene("Menu",(function(){l.inst.readyButton.setInteractable(!0),l.inst.leaveRoomButton.setInteractable(!0),l.inst.loadingScreen.hide(),l.inst.switchUIState(u.PlayMenu),d.inst.play("menu")}))):l.inst.UIState===u.RoomMenu&&l.inst.switchUIState(u.PlayMenu),console.error(e.t0);case 22:case"end":return e.stop()}}),e,this,[[1,18]])})));return function(t,n){return e.apply(this,arguments)}}(),s.setLobbyRoomListeners=function(){var e=n(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.LobbyRoom.removeAllListeners(),this.LobbyRoom.onLeave((function(e){console.debug("onLeave: ",e),1e3!=e&&l.inst.showNetworkError("Connection to the server lost. Do you want to try to reconnect?")})),this.LobbyRoom.onMessage("server_error",(function(e){console.error("[LobbyRoom] "+e),l.inst.showNotification(e)})),this.LobbyRoom.onMessage("status",(function(e){console.log(e.title+" : "+e.message),l.inst.showStatus(e.title,e.message)})),this.LobbyRoom.onMessage("setAuthorization",(function(e){t.authorization=e})),this.LobbyRoom.onMessage("joinRoom",n(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l.inst.switchUIState(u.RoomMenu),e.next=4,t.connectToGame(n);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),l.inst.switchUIState(u.PlayMenu),l.inst.showNotification("Failed to join GameRoom");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))),this.LobbyRoom.onMessage("leaveRoom",(function(){l.inst.playersScrollView.players.forEach((function(e,t){e.destroy()})),l.inst.playersScrollView.players.clear(),console.debug("Left GameRoom"),l.inst.switchUIState(u.PlayMenu)})),this.LobbyRoom.onMessage("receivedInvitation",(function(e){l.inst.showInvitation(e)})),this.LobbyRoom.onMessage("joinedMatchmaking",(function(){l.inst.switchUIState(u.MatchmakingMenu)})),this.LobbyRoom.onMessage("leftMatchmaking",(function(){l.inst.switchUIState(u.PlayMenu)})),this.LobbyRoom.onMessage("reconnect",n(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.reconnecting=!0,t.reconnectionToken=n,l.inst.switchUIState(u.RoomMenu),t.connectToGame(null,!0),l.inst.loadingScreen.show(),l.inst.loadingScreen.setLoadingInfo("Waiting for server");case 6:case"end":return e.stop()}}),e)}))));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.setGameRoomListeners=function(){var e=n(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.GameRoom.removeAllListeners(),this.GameRoom.onLeave((function(e){1e3!=e&&t.GameRoom.state.gameState!=R.Lobby&&l.inst.showNetworkError("Connection to the server lost. You have 15 seconds to reconnect before your opponent wins by forfeit",!0)})),this.GameRoom.onMessage("server_error",(function(e){console.error("[GameRoom] "+e),l.inst.showNotification(e)})),this.GameRoom.onMessage("status",(function(e){console.log(e.title+" : "+e.message),l.inst.showStatus(e.title,e.message)})),this.GameRoom.onMessage("updateMaps",(function(e){m.inst.thumbnailCache.clear(),m.inst.backgroundCache.clear(),m.inst.musicCache.clear(),l.inst.mapsScrollView.clearMaps(),e&&(e.forEach((function(e,t){l.inst.mapsScrollView.addMap(e)})),l.inst.mapsScrollView.setSelectedMap(t.GameRoom.state.selectedMap))})),this.GameRoom.onMessage("setMaps",(function(e){l.inst.mapsScrollView.clearMaps(),e&&(e.forEach((function(e,t){l.inst.mapsScrollView.addMap(e)})),l.inst.mapsScrollView.setSelectedMap(t.GameRoom.state.selectedMap)),t.reconnecting&&(t.reconnecting=!1,a.loadScene("Game",(function(){t.loadGame(),t.GameRoom.send("clientReconnectedReady")})))})),this.GameRoom.onMessage("loadMenu",(function(){"Game"===a.getScene().name&&t.removeGameRoomWorldListeners(),a.loadScene("Menu",(function(){l.inst.readyButton.setInteractable(!0),l.inst.leaveRoomButton.setInteractable(!0),l.inst.loadingScreen.hide(),l.inst.switchUIState(u.RoomMenu),d.inst.play("menu")}))})),this.GameRoom.onMessage("loadingScreen",(function(){l.inst.loadingScreen.show(),l.inst.loadingScreen.setLoadingInfo("Waiting for server")})),this.GameRoom.onMessage("loadGame",(function(){d.inst.playOneShotUI("game_start"),a.loadScene("Game",(function(){t.loadGame()}))})),this.GameRoom.onMessage("endGame",(function(e){d.inst.musicSource.stop(),l.inst.showEndGameScreen(e)})),this.GameRoom.state.listen("countdownStarted",(function(e){e?(l.inst.readyButton.setInteractable(!1),l.inst.leaveRoomButton.setInteractable(!1),l.inst.enableCountdown()):l.inst.disableCountdown()})),this.GameRoom.state.listen("countdown",(function(e){l.inst.updateCountdown(e)})),this.GameRoom.state.listen("selectedMap",(function(e){l.inst.mapsScrollView.setSelectedMap(e)})),this.GameRoom.state.players.onAdd(n(o().mark((function e(n,s){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.inst.playersScrollView.addPlayer(n.id,n.username,n.xp,n.avatarUrl,n.ready);case 2:n.listen("username",(function(e){l.inst.playersScrollView.updatePlayer(n.id,e,null,null,null)})),n.listen("ready",(function(e){l.inst.playersScrollView.updatePlayer(n.id,null,null,null,e)})),n.listen("xp",(function(e){l.inst.playersScrollView.updatePlayer(n.id,null,null,e,null)})),n.listen("score",(function(e){var n=t.GameRoom.state.players.get(t.GameRoom.state.leftPlayer),o=t.GameRoom.state.players.get(t.GameRoom.state.rightPlayer);m.inst.game&&n&&o&&m.inst.game.showScores(n.score,o.score)}));case 6:case"end":return e.stop()}}),e)})))),this.GameRoom.state.players.onRemove((function(e,t){l.inst.playersScrollView.removePlayer(e.id)}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.setGameRoomWorldListeners=function(){this.removeGameRoomWorldListeners();var e=this.GameRoom.state.players.get(this.GameRoom.state.leftPlayer),t=this.GameRoom.state.players.get(this.GameRoom.state.rightPlayer);this.startGameCallback=this.GameRoom.onMessage("startGame",(function(){l.inst.loadingScreen.hide(),d.inst.musicSource.play(),m.inst.game.showHUD(),m.inst.game.enableCamera(),m.inst.game.showScores(e.score,t.score)})),this.entitiesOnAddCallback=this.GameRoom.state.entities.onAdd((function(e,t){m.inst.game.instantiateEntity(e)})),this.entitiesOnRemoveCallback=this.GameRoom.state.entities.onRemove((function(e,t){m.inst.game.destroyEntity(t)}))},s.removeGameRoomWorldListeners=function(){this.startGameCallback&&(this.startGameCallback(),this.startGameCallback=null),this.entitiesOnAddCallback&&(this.entitiesOnAddCallback(),this.entitiesOnAddCallback=null),this.entitiesOnRemoveCallback&&(this.entitiesOnRemoveCallback(),this.entitiesOnRemoveCallback=null)},s.loadGame=function(){d.inst.stopMusic(),l.inst.loadingScreen.setLoadingInfo("Initializing game");var e=a.getScene().getChildByName("GameCanvas");e.getComponent(r);m.inst.game=e.getComponent(h),m.inst.keybinds.updateKeybinds(),l.inst.loadingScreen.setLoadingInfo("Clearing UI"),l.inst.switchUIState(u.None),l.inst.notifications.destroyAllChildren(),l.inst.loadingScreen.setLoadingInfo("Setting UI");var t=m.inst.maps.get(this.GameRoom.state.selectedMap);m.inst.game.setBackground(t.background),d.inst.musicSource.clip=t.music;var n=this.GameRoom.state.players.get(this.GameRoom.state.leftPlayer),o=this.GameRoom.state.players.get(this.GameRoom.state.rightPlayer);m.inst.game.setLeftPlayer(m.inst.avatarCache.get(n.avatarUrl),n.username),m.inst.game.setRightPlayer(m.inst.avatarCache.get(o.avatarUrl),o.username),m.inst.game.setScores(n.score,o.score),this.GameRoom.send("clientReady"),l.inst.loadingScreen.setLoadingInfo("Waiting for other players"),this.setGameRoomWorldListeners()},s.sendInputs=function(e){this.GameRoom.send("updateInputs",e)},s.createRoom=function(){this.LobbyRoom&&this.LobbyRoom.connection.isOpen?this.LobbyRoom.send("createRoom"):l.inst.showNetworkError("Connection to the server lost. Do you want to try to reconnect?")},s.leaveRoom=function(){this.LobbyRoom.send("leaveRoom")},s.setReady=function(){this.GameRoom.send("setReady")},s.acceptInvitation=function(e){this.LobbyRoom.send("acceptInvitation",e)},s.declineInvitation=function(e){this.LobbyRoom.send("declineInvitation",e)},s.joinMatchmaking=function(){this.LobbyRoom&&this.LobbyRoom.connection.isOpen?this.LobbyRoom.send("joinMatchmaking"):l.inst.showNetworkError("Connection to the server lost. Do you want to try to reconnect?")},s.leaveMatchmaking=function(){this.LobbyRoom.send("leaveMatchmaking")},s.setSelectedMap=function(e){this.GameRoom&&this.GameRoom.send("setSelectedMap",e)},t(e,[{key:"getOnlineUsers",get:function(){return this.LobbyRoom?this.LobbyRoom.state.players.size:-1}},{key:"getSelectedMap",get:function(){return this.GameRoom?this.GameRoom.state.selectedMap:-1}},{key:"getAuthorization",get:function(){return this.authorization}},{key:"getLobbyRoom",get:function(){return this.LobbyRoom}},{key:"getGameRoom",get:function(){return this.GameRoom}},{key:"getOwnPlayer",get:function(){return this.GameRoom.state.players.get(this.GameRoom.sessionId)}}],[{key:"inst",get:function(){return null==this._inst&&(this._inst=new e),this._inst}}]),e}())._inst=void 0,y=g))||y);s._RF.pop()}}}));

System.register("chunks:///_virtual/Notification.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){var o,i,n,e,a,c,s,l,r;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,e=t.find,a=t.Button,c=t.Label,s=t.Node,l=t.Component},function(t){r=t.AudioManager}],execute:function(){var u;i._RF.push({},"7cda3gXA7BLDpMKQ1DpDwSc","Notification",void 0);var h=n.ccclass;n.property,t("Notification",h("Notification")(u=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(o=t.call.apply(t,[this].concat(n))||this).textNode=void 0,o.textLabel=void 0,o.okNode=void 0,o.okButton=void 0,o.clickCallback=void 0,o.hoverCallback=void 0,o}o(i,t);var n=i.prototype;return n.onLoad=function(){var t=this;this.okNode=e("NotificationLayout/ButtonsLayout/OKButton",this.node),this.okButton=this.okNode.getComponent(a),this.textNode=e("NotificationLayout/TitleLayout/Message",this.node),this.textLabel=this.textNode.getComponent(c),this.clickCallback=function(o){r.inst.playOneShotUI("button_click"),t.node.destroy()},this.hoverCallback=function(t){r.inst.playOneShotUI("button_hover")}},n.onEnable=function(){this.okNode.on(a.EventType.CLICK,this.clickCallback),this.okNode.on(s.EventType.MOUSE_ENTER,this.hoverCallback)},n.onDisable=function(){this.okNode.off(a.EventType.CLICK,this.clickCallback),this.okNode.off(s.EventType.MOUSE_ENTER,this.hoverCallback)},n.init=function(t){this.textLabel.string=t},i}(l))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/PaddleState.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ad60bJVMItBjIULmfhYCEBo","PaddleState",void 0);t("PaddleState",{Up:1,Stop:2,Down:3});e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./UIState.ts"],(function(t){var n,o,e,a,i,c,l,s,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,a=t.Button,i=t.Node,c=t.Component},function(t){l=t.AudioManager},function(t){s=t.UIManager},function(t){r=t.UIState}],execute:function(){var u;o._RF.push({},"fe25c5GZbxKdLFRnVwPs7A2","PlayButton",void 0);var h=e.ccclass;e.property,t("PlayButton",h("PlayButton")(u=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(a),this.clickCallback=function(t){l.inst.playOneShotUI("button_click"),s.inst.switchUIState(r.PlayMenu)},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(a.EventType.CLICK,this.clickCallback),this.node.on(i.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(a.EventType.CLICK,this.clickCallback),this.node.off(i.EventType.MOUSE_ENTER,this.hoverCallback)},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./AudioManager.ts","./CalculateLevel.ts"],(function(e){var a,t,r,n,i,o,l,s,y,p;return{setters:[function(e){a=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator,n=e.find,i=e.Sprite,o=e.Label,l=e.Component},function(e){s=e.UIManager},function(e){y=e.AudioManager},function(e){p=e.calculateLevel}],execute:function(){var d;t._RF.push({},"dd15d3Ee9BL/r950MtW8d8/","PlayerItem",void 0);var v=r.ccclass;r.property,e("PlayerItem",v("PlayerItem")(d=function(e){function t(){for(var a,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(a=e.call.apply(e,[this].concat(r))||this).playerAvatarNode=void 0,a.playerAvatar=void 0,a.playerUsernameNode=void 0,a.playerUsername=void 0,a.playerLevelNode=void 0,a.playerLevel=void 0,a.playerReadyNode=void 0,a.playerReady=void 0,a}a(t,e);var r=t.prototype;return r.onLoad=function(){this.playerAvatarNode=n("PlayerAvatar",this.node),this.playerAvatar=this.playerAvatarNode.getComponent(i),this.playerUsernameNode=n("PlayerInfoLayout/PlayerUsername",this.node),this.playerUsername=this.playerUsernameNode.getComponent(o),this.playerLevelNode=n("PlayerInfoLayout/PlayerLevel",this.node),this.playerLevel=this.playerLevelNode.getComponent(o),this.playerReadyNode=n("PlayerReady",this.node),this.playerReady=this.playerReadyNode.getComponent(i)},r.updatePlayer=function(e,a,t,r){a&&(this.playerAvatar.spriteFrame=a),e&&(this.playerUsername.string=e),t&&(this.playerLevel.string=String("Level "+p(t))),null!=r&&this.setReady(r)},r.init=function(e,a,t,r){this.playerAvatar.spriteFrame=a,this.playerUsername.string=e,this.playerLevel.string=String("Level "+p(t)),this.setReady(r)},r.setReady=function(e){e?(this.playerReady.spriteFrame=s.inst.readyIcon,y.inst.playOneShotUI("status_ready")):this.playerReady.spriteFrame=s.inst.notReadyIcon},t}(l))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayersScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./PlayerItem.ts","./GameManager.ts","./NetworkManager.ts"],(function(e){var t,r,a,n,o,s,i,l,c,u,p,y,d,f,h;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){n=e.cclegacy,o=e._decorator,s=e.find,i=e.Component,l=e.assetManager,c=e.Texture2D,u=e.SpriteFrame,p=e.instantiate},function(e){y=e.UIManager},function(e){d=e.PlayerItem},function(e){f=e.GameManager},function(e){h=e.NetworkManager}],execute:function(){var g;n._RF.push({},"30cee8eKRJGmJBKC/bAApCc","PlayersScrollView",void 0);var v=o.ccclass;o.property,e("PlayersScrollView",v("PlayersScrollView")(g=function(e){function n(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).contentNode=void 0,t.playerItemPrefab=void 0,t.players=new Map,t}t(n,e);var o=n.prototype;return o.onLoad=function(){this.contentNode=s("view/content",this.node),this.playerItemPrefab=y.inst.prefabs.get("PlayerItem")},o.addPlayer=function(){var e=r(a().mark((function e(t,r,n,o,s){var i,y;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.players.get(t)){e.next=4;break}return console.log(r+" already exists"),e.abrupt("return");case 4:return this.players.set(t,null),e.next=7,p(this.playerItemPrefab);case 7:i=e.sent,y=i.getComponent(d),this.players.set(t,i),i.layer=1<<17,i.parent=this.contentNode,l.loadRemote(o+"?authorization="+h.inst.getAuthorization,(function(e,t){if(e)console.error("Failed to download avatar: "+o+" "+e);else if(t){console.debug("Downloaded avatar: "+o);var a=new c;a.image=t;var i=new u;i.texture=a,f.inst.avatarCache.set(o,i),y.init(r,i,n,s)}}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,a,n,o){return e.apply(this,arguments)}}(),o.updatePlayer=function(e,t,r,a,n){var o=this.players.get(e);o?o.getComponent(d).updatePlayer(t,r,a,n):console.error("No player found for id "+e)},o.removePlayer=function(e){var t=this.players.get(e);t&&(t.destroy(),this.players.delete(e))},o.setPlayerReady=function(e,t){this.players.get(e).getComponent(d).setReady(t)},o.clearPlayers=function(){this.contentNode.destroyAllChildren(),this.players.clear()},n}(i))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayMenuBackButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./UIState.ts"],(function(t){var n,o,e,a,c,i,l,u,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,a=t.Button,c=t.Node,i=t.Component},function(t){l=t.AudioManager},function(t){u=t.UIManager},function(t){r=t.UIState}],execute:function(){var s;o._RF.push({},"820f4FZrd9NZYhSh47/4zvG","PlayMenuBackButton",void 0);var h=e.ccclass;e.property,t("PlayMenuBackButton",h("PlayMenuBackButton")(s=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(a),this.clickCallback=function(t){l.inst.playOneShotUI("button_click"),u.inst.switchUIState(r.Menu)},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(a.EventType.CLICK,this.clickCallback),this.node.on(c.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(a.EventType.CLICK,this.clickCallback),this.node.off(c.EventType.MOUSE_ENTER,this.hoverCallback)},o}(i))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/PowerupControlButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./Keybinds.ts","./GameManager.ts"],(function(t){var n,o,e,i,a,r,s,u,l,c,b,d;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,a=t.Label,r=t.Node,s=t.KeyCode,u=t.Component},function(t){l=t.AudioManager},function(t){c=t.UIManager},function(t){b=t.Bind},function(t){d=t.GameManager}],execute:function(){var h;o._RF.push({},"a83eaYSyopAUafRshD7C0MT","PowerupControlButton",void 0);var p=e.ccclass;e.property,t("PowerupControlButton",p("PowerupControlButton")(h=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).buttonNode=void 0,n.button=void 0,n.keybindNode=void 0,n.keybindLabel=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n.keybindCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){var t=this;this.buttonNode=this.node.getChildByName("PowerupControlButton"),this.button=this.buttonNode.getComponent(i),this.keybindNode=this.buttonNode.getChildByName("Label"),this.keybindLabel=this.keybindNode.getComponent(a),this.updateKeybindLabel(d.inst.keybinds.getKeybind(b.Powerup)),this.clickCallback=function(n){l.inst.playOneShotUI("button_click"),c.inst.pressAnyKeyScreen.show(b.Powerup,t.updateKeybindLabel.bind(t))},this.hoverCallback=function(t){l.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.buttonNode.on(i.EventType.CLICK,this.clickCallback),this.buttonNode.on(r.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.buttonNode.off(i.EventType.CLICK,this.clickCallback),this.buttonNode.off(r.EventType.MOUSE_ENTER,this.hoverCallback)},e.updateKeybindLabel=function(t){var n=s[t];n.startsWith("KEY_")&&(n=n.substring(4)),n=n.replace(/_/g," "),this.keybindLabel.string=n},o}(u))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/PressAnyKeyScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){var n,t,i,o,s,a,l,c,r;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,o=e.find,s=e.Label,a=e.input,l=e.Input,c=e.Component},function(e){r=e.GameManager}],execute:function(){var y;t._RF.push({},"c4b5bG9icFFPIL/N5FtD539","PressAnyKeyScreen",void 0);var d=i.ccclass;i.property,e("PressAnyKeyScreen",d("PressAnyKeyScreen")(y=function(e){function t(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))||this).pressAnyKeyNode=void 0,n.pressAnyKeyLabel=void 0,n.cancellingNode=void 0,n.cancellingLabel=void 0,n.bind=void 0,n.timeoutInterval=void 0,n.onKeyBindSetCallback=null,n}n(t,e);var i=t.prototype;return i.onLoad=function(){this.pressAnyKeyNode=o("PressAnyKeyLayout/PressAnyKey",this.node),this.pressAnyKeyLabel=this.pressAnyKeyNode.getComponent(s),this.cancellingNode=o("PressAnyKeyLayout/Cancelling",this.node),this.cancellingLabel=this.cancellingNode.getComponent(s)},i.onEnable=function(){a.on(l.EventType.KEY_DOWN,this.onKeyDown,this)},i.onDisable=function(){a.off(l.EventType.KEY_DOWN,this.onKeyDown,this)},i.onKeyDown=function(e){clearInterval(this.timeoutInterval),r.inst.keybinds.setKeybind(this.bind,e.keyCode),this.onKeyBindSetCallback&&this.onKeyBindSetCallback(e.keyCode),this.node.active=!1},i.show=function(e,n){var t=this;if(this.node.active)return null;this.node.active=!0,this.bind=e,this.onKeyBindSetCallback=n||null;var i=5;this.cancellingLabel.string="Cancelling in "+i+" seconds",this.node.active=!0,this.timeoutInterval=setInterval((function(){i-=1,t.cancellingLabel.string="Cancelling in "+i+" seconds",i<=0&&(clearInterval(t.timeoutInterval),t.node.active=!1)}),1e3)},t}(c))||y);t._RF.pop()}}}));

System.register("chunks:///_virtual/ReadyButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./NetworkManager.ts"],(function(t){var n,o,e,a,i,c,r,l;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,a=t.Button,i=t.Node,c=t.Component},function(t){r=t.AudioManager},function(t){l=t.NetworkManager}],execute:function(){var u;o._RF.push({},"3c820AR8u9KuYyRRp6/lYS4","ReadyButton",void 0);var s=e.ccclass;e.property,t("ReadyButton",s("ReadyButton")(u=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(a),this.clickCallback=function(t){l.inst.setReady()},this.hoverCallback=function(t){r.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(a.EventType.CLICK,this.clickCallback),this.node.on(i.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(a.EventType.CLICK,this.clickCallback),this.node.off(i.EventType.MOUSE_ENTER,this.hoverCallback)},e.setInteractable=function(t){this.button.interactable=t},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/Score.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){var t,r,o,c,n;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,o=e._decorator,c=e.Component},function(e){n=e.GameManager}],execute:function(){var a;r._RF.push({},"c78faYjQq1BULUcX4pZ4FZ8","Score",void 0);var u=o.ccclass;o.property,e("Score",u("Score")(a=function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var o=r.prototype;return o.updateLeftScore=function(){n.inst.game.updateLeftScore()},o.updateRightScore=function(){n.inst.game.updateRightScore()},r}(c))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollingParallax.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,i,o,d,l,a,u;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,i=e._decorator,o=e.Vec2,d=e.Sprite,l=e.screen,a=e.view,u=e.Component}],execute:function(){var c;s._RF.push({},"5f153b1pt5KOp8YwXa+nhKg","ScrollingParallax",void 0);var n=i.ccclass;i.property,e("ScrollingParallax",n("ScrollingParallax")(c=function(e){function s(){for(var t,s=arguments.length,i=new Array(s),d=0;d<s;d++)i[d]=arguments[d];return(t=e.call.apply(e,[this].concat(i))||this).skyNode=void 0,t.clouds1Node=void 0,t.clouds2Node=void 0,t.mountainsNode=void 0,t.clouds3Node=void 0,t.clouds4Node=void 0,t.clouds5Node=void 0,t.skyMaterial=void 0,t.clouds1Material=void 0,t.clouds2Material=void 0,t.mountainsMaterial=void 0,t.clouds3Material=void 0,t.clouds4Material=void 0,t.clouds5Material=void 0,t.graphicsMaterial=void 0,t.skySpeed=0,t.clouds1Speed=.006,t.clouds2Speed=.016,t.mountainsSpeed=.02,t.clouds3Speed=.028,t.clouds4Speed=.04,t.clouds5Speed=.12,t.skyOffset=new o(0,0),t.clouds1Offset=new o(0,0),t.clouds2Offset=new o(0,0),t.mountainsOffset=new o(0,0),t.clouds3Offset=new o(0,0),t.clouds4Offset=new o(0,0),t.clouds5Offset=new o(0,0),t.skyAccumulatedOffset=new o(0,0),t.clouds1AccumulatedOffset=new o(0,0),t.clouds2AccumulatedOffset=new o(0,0),t.mountainsAccumulatedOffset=new o(0,0),t.clouds3AccumulatedOffset=new o(0,0),t.clouds4AccumulatedOffset=new o(0,0),t.clouds5AccumulatedOffset=new o(0,0),t.canvasSize=void 0,t.designSize=void 0,t.updateScreenSize=function(){t.canvasSize=l.windowSize,t.designSize=a.getDesignResolutionSize()},t}t(s,e);var i=s.prototype;return i.onEnable=function(){this.skyOffset=new o(0,0),this.clouds1Offset=new o(0,0),this.clouds2Offset=new o(0,0),this.mountainsOffset=new o(0,0),this.clouds3Offset=new o(0,0),this.clouds4Offset=new o(0,0),this.clouds5Offset=new o(0,0),this.updateScreenSize(),window.addEventListener("resize",this.updateScreenSize)},i.onDisable=function(){window.removeEventListener("resize",this.updateScreenSize)},i.onLoad=function(){this.skyNode=this.node.getChildByName("sky"),this.clouds1Node=this.node.getChildByName("clouds1"),this.clouds2Node=this.node.getChildByName("clouds2"),this.mountainsNode=this.node.getChildByName("mountains"),this.clouds3Node=this.node.getChildByName("clouds3"),this.clouds4Node=this.node.getChildByName("clouds4"),this.clouds5Node=this.node.getChildByName("clouds5"),this.skyMaterial=this.skyNode.getComponent(d).material,this.clouds1Material=this.clouds1Node.getComponent(d).material,this.clouds2Material=this.clouds2Node.getComponent(d).material,this.mountainsMaterial=this.mountainsNode.getComponent(d).material,this.clouds3Material=this.clouds3Node.getComponent(d).material,this.clouds4Material=this.clouds4Node.getComponent(d).material,this.clouds5Material=this.clouds5Node.getComponent(d).material},i.update=function(e){this.updateOffset(this.skyMaterial,this.skySpeed,this.skyOffset,this.skyAccumulatedOffset,e),this.updateOffset(this.clouds1Material,this.clouds1Speed,this.clouds1Offset,this.clouds1AccumulatedOffset,e),this.updateOffset(this.clouds2Material,this.clouds2Speed,this.clouds2Offset,this.clouds2AccumulatedOffset,e),this.updateOffset(this.mountainsMaterial,this.mountainsSpeed,this.mountainsOffset,this.mountainsAccumulatedOffset,e),this.updateOffset(this.clouds3Material,this.clouds3Speed,this.clouds3Offset,this.clouds3AccumulatedOffset,e),this.updateOffset(this.clouds4Material,this.clouds4Speed,this.clouds4Offset,this.clouds4AccumulatedOffset,e),this.updateOffset(this.clouds5Material,this.clouds5Speed,this.clouds5Offset,this.clouds5AccumulatedOffset,e)},i.updateOffset=function(e,t,s,i,o){var d=t*this.canvasSize.width*o;if(i.x+=d,Math.abs(i.x)>=1){var l=Math.floor(i.x);i.x-=l,s.x+=l/this.canvasSize.width,e.setProperty("offset",s)}},s}(u))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/SettingsButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./UIState.ts"],(function(t){var n,o,e,i,a,c,s,l,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,a=t.Node,c=t.Component},function(t){s=t.AudioManager},function(t){l=t.UIManager},function(t){r=t.UIState}],execute:function(){var u;o._RF.push({},"d6afdt9gpdKSpEoq/w0HvYf","SettingsButton",void 0);var h=e.ccclass;e.property,t("SettingsButton",h("SettingsButton")(u=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(i),this.clickCallback=function(t){s.inst.playOneShotUI("button_click"),l.inst.switchUIState(r.SettingsMenu)},this.hoverCallback=function(t){s.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(i.EventType.CLICK,this.clickCallback),this.node.on(a.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(i.EventType.CLICK,this.clickCallback),this.node.off(a.EventType.MOUSE_ENTER,this.hoverCallback)},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/SettingsMenuBackButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts","./UIState.ts"],(function(t){var n,o,e,i,c,a,s,u,l;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Button,c=t.Node,a=t.Component},function(t){s=t.AudioManager},function(t){u=t.UIManager},function(t){l=t.UIState}],execute:function(){var r;o._RF.push({},"44c05wFOaBG3LMSfbqyiY82","SettingsMenuBackButton",void 0);var h=e.ccclass;e.property,t("SettingsMenuBackButton",h("SettingsMenuBackButton")(r=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),i=0;i<o;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).button=void 0,n.clickCallback=void 0,n.hoverCallback=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){this.button=this.getComponent(i),this.clickCallback=function(t){s.inst.playOneShotUI("button_click"),u.inst.switchUIState(l.Menu)},this.hoverCallback=function(t){s.inst.playOneShotUI("button_hover")}},e.onEnable=function(){this.node.on(i.EventType.CLICK,this.clickCallback),this.node.on(c.EventType.MOUSE_ENTER,this.hoverCallback)},e.onDisable=function(){this.node.off(i.EventType.CLICK,this.clickCallback),this.node.off(c.EventType.MOUSE_ENTER,this.hoverCallback)},o}(a))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/ShapeType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"a482dOu78tOTq26YzE+g3C3","ShapeType",void 0);e("ShapeType",function(e){return e[e.Sphere=1]="Sphere",e[e.Box=2]="Box",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/StatusBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){var o,i,n,e,a,s,l,c,u;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,e=t.find,a=t.Label,s=t.AnimationComponent,l=t.Button,c=t.Component},function(t){u=t.AudioManager}],execute:function(){var d;i._RF.push({},"430c92dzclPf57pqFUjpBrq","StatusBox",void 0);var r=n.ccclass;n.property,t("StatusBox",r("StatusBox")(d=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(o=t.call.apply(t,[this].concat(n))||this).titleNode=void 0,o.titleLabel=void 0,o.messageNode=void 0,o.messageLabel=void 0,o.animation=void 0,o.clickCallback=void 0,o}o(i,t);var n=i.prototype;return n.onLoad=function(){var t=this;this.titleNode=e("StatusBoxLayout/TitleLayout/StatusTitle",this.node),this.titleLabel=this.titleNode.getComponent(a),this.messageNode=e("StatusBoxLayout/MessageLayout/StatusMessage",this.node),this.messageLabel=this.messageNode.getComponent(a),this.animation=this.node.getComponent(s),this.node.addComponent(l),this.clickCallback=function(o){u.inst.playOneShotUI("status_close"),t.animation&&t.animation.play("notificationFadeOut")}},n.onEnable=function(){this.node.on(l.EventType.CLICK,this.clickCallback)},n.onDisable=function(){this.node.off(l.EventType.CLICK,this.clickCallback)},n.init=function(t,o){var i=this;this.titleLabel.string=t,this.messageLabel.string=o,this.animation.play("notificationFadeIn"),setTimeout((function(){i.animation&&i.animation.play("notificationFadeOut")}),2500)},n.destroyStatusBox=function(){this.node&&this.node.destroy()},i}(c))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIState.ts","./GameManager.ts","./Invitation.ts","./Notification.ts","./MapsScrollView.ts","./PlayersScrollView.ts","./LoadingScreen.ts","./NetworkError.ts","./EndGameScreen.ts","./StatusBox.ts","./PressAnyKeyScreen.ts","./AudioManager.ts","./ReadyButton.ts","./LeaveRoomButton.ts","./ScrollingParallax.ts"],(function(t){var e,n,o,i,a,s,r,c,u,d,h,l,m,g,v,y,f,S,p,M,N,w,C,B,b,k,R;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,o=t._decorator,i=t.resources,a=t.Prefab,s=t.SpriteFrame,r=t.Camera,c=t.Label,u=t.find,d=t.instantiate,h=t.Node,l=t.director},function(t){m=t.UIState},function(t){g=t.GameManager},function(t){v=t.Invitation},function(t){y=t.Notification},function(t){f=t.MapsScrollView},function(t){S=t.PlayersScrollView},function(t){p=t.LoadingScreen},function(t){M=t.NetworkError},function(t){N=t.EndGameScreen},function(t){w=t.StatusBox},function(t){C=t.PressAnyKeyScreen},function(t){B=t.AudioManager},function(t){b=t.ReadyButton},function(t){k=t.LeaveRoomButton},function(t){R=t.ScrollingParallax}],execute:function(){var I,V;n._RF.push({},"d9ec7pHrk1OpbB4FPYxJrJI","UIManager",void 0);var P=o.ccclass;o.property,t("UIManager",P("UIManager")(((V=function(){function t(){this.node=void 0,this.canvas=void 0,this.prefabs=new Map,this.UIState=void 0,this.background=void 0,this.backgroundScrollingParallax=void 0,this.menu=void 0,this.playMenu=void 0,this.settingsMenu=void 0,this.audioSettingsMenu=void 0,this.controlsSettingsMenu=void 0,this.roomMenu=void 0,this.matchmakingMenu=void 0,this.notifications=void 0,this.status=void 0,this.defaultAvatar=void 0,this.countdownNode=void 0,this.countdownValueNode=void 0,this.countdownValueLabel=void 0,this.mapsScrollViewNode=void 0,this.mapsScrollView=void 0,this.playersScrollViewNode=void 0,this.playersScrollView=void 0,this.readyIcon=void 0,this.notReadyIcon=void 0,this.loadingScreen=void 0,this.pressAnyKeyScreen=void 0,this.readyButtonNode=void 0,this.readyButton=void 0,this.leaveRoomButtonNode=void 0,this.leaveRoomButton=void 0,this.node=new h,this.node.name="UIManager",l.getScene().addChild(this.node),l.addPersistRootNode(this.node)}var n=t.prototype;return n.loadResources=function(){return new Promise((function(e,n){i.loadDir("UI",(function(e,o){e?n(e):o.forEach((function(e){e instanceof a?t.inst.prefabs.set(e.name,e):e instanceof s&&("default"===e.name?t.inst.defaultAvatar=e:"ready"===e.name?t.inst.readyIcon=e:"notReady"===e.name&&(t.inst.notReadyIcon=e))}))})),e()}))},n.switchUIState=function(t){this.UIState=t,this.reactUIState(t)},n.reactUIState=function(t){switch(this.menu.active=!1,this.playMenu.active=!1,this.settingsMenu.active=!1,this.audioSettingsMenu.active=!1,this.controlsSettingsMenu.active=!1,this.roomMenu.active=!1,this.matchmakingMenu.active=!1,t==m.None||this.background.active||(this.background.active=!0),t){case m.Menu:this.menu.active=!0;break;case m.PlayMenu:this.playMenu.active=!0;break;case m.SettingsMenu:this.settingsMenu.active=!0;break;case m.AudioSettingsMenu:this.audioSettingsMenu.active=!0;break;case m.ControlsSettingsMenu:this.controlsSettingsMenu.active=!0;break;case m.RoomMenu:this.roomMenu.active=!0;break;case m.MatchmakingMenu:this.matchmakingMenu.active=!0;break;case m.None:this.background.active=!1}},n.setCanvas=function(t){this.canvas=t,g.inst.cameraNode=t.node.getChildByName("UICamera"),g.inst.camera=g.inst.cameraNode.getComponent(r),this.background=t.node.getChildByName("Background"),this.backgroundScrollingParallax=this.background.getComponent(R),this.menu=t.node.getChildByName("Menu"),this.playMenu=t.node.getChildByName("PlayMenu"),this.roomMenu=t.node.getChildByName("RoomMenu"),this.settingsMenu=t.node.getChildByName("SettingsMenu"),this.audioSettingsMenu=t.node.getChildByName("AudioSettingsMenu"),this.controlsSettingsMenu=t.node.getChildByName("ControlsSettingsMenu"),this.matchmakingMenu=t.node.getChildByName("MatchmakingMenu"),this.notifications=t.node.getChildByName("Notifications"),this.status=t.node.getChildByName("Status"),this.countdownNode=this.roomMenu.getChildByName("CountdownLayout"),this.countdownValueNode=this.countdownNode.getChildByName("CountdownValue"),this.countdownValueLabel=this.countdownValueNode.getComponent(c),this.readyButtonNode=u("RoomLayout/RoomPlayersLayout/ReadyButton",this.roomMenu),this.readyButton=this.readyButtonNode.getComponent(b),this.leaveRoomButtonNode=u("RoomLayout/RoomPlayersLayout/LeaveRoomButton",this.roomMenu),this.leaveRoomButton=this.leaveRoomButtonNode.getComponent(k),this.mapsScrollViewNode=u("RoomLayout/RoomLayout/MapsScrollView",this.roomMenu),this.mapsScrollView=this.mapsScrollViewNode.getComponent(f),this.playersScrollViewNode=u("RoomLayout/RoomPlayersLayout/PlayersScrollView",this.roomMenu),this.playersScrollView=this.playersScrollViewNode.getComponent(S),this.loadingScreen=t.node.getChildByName("LoadingScreen").getComponent(p),this.pressAnyKeyScreen=t.node.getChildByName("PressAnyKeyScreen").getComponent(C)},n.showInvitation=function(t){var e=d(this.prefabs.get("Invitation"));e.layer=1<<17,e.parent=this.notifications,e.getComponent(v).init(t.id,t.username,t.avatarUrl)},n.showNotification=function(t){var e=d(this.prefabs.get("Notification"));e.layer=1<<19,e.parent=this.notifications,e.getComponent(y).init(t)},n.showNetworkError=function(t,e){void 0===e&&(e=!1);var n=this.notifications.getChildByName("NetworkError");if(n){if(!e)return;n.destroy()}var o=d(this.prefabs.get("NetworkError"));o.layer=1<<19,o.parent=this.notifications,o.getComponent(M).init(t,e)},n.showEndGameScreen=function(t){var e=d(this.prefabs.get("EndGameScreen"));e.layer=1<<19,e.parent=this.notifications,e.getComponent(N).init(t)},n.showStatus=function(t,e){var n=d(this.prefabs.get("StatusBox"));n.layer=1<<19,n.parent=this.status,n.getComponent(w).init(t,e)},n.enableCountdown=function(){this.countdownNode.active||(this.countdownNode.active=!0)},n.disableCountdown=function(){this.countdownNode.active&&(this.countdownNode.active=!1)},n.updateCountdown=function(t){t>0&&B.inst.playOneShotUI("tick"),this.countdownValueLabel.string=String(t)},n.showPressAnyKeyScreen=function(t,e){this.pressAnyKeyScreen.show(t,e)},e(t,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new t),this._inst}}]),t}())._inst=void 0,I=V))||I);n._RF.pop()}}}));

System.register("chunks:///_virtual/UISlider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var o,i,t,l,n,r,s,u;return{setters:[function(e){o=e.inheritsLoose},function(e){i=e.cclegacy,t=e._decorator,l=e.Slider,n=e.find,r=e.Label,s=e.Component},function(e){u=e.AudioManager}],execute:function(){var a;i._RF.push({},"b2e2aTbf7pL1bVCyCzRf9KO","UISlider",void 0);var d=t.ccclass;t.property,e("UISlider",d("UISlider")(a=function(e){function i(){for(var o,i=arguments.length,t=new Array(i),l=0;l<i;l++)t[l]=arguments[l];return(o=e.call.apply(e,[this].concat(t))||this).UISliderNode=void 0,o.UISlider=void 0,o.UIVolumeValueNode=void 0,o.UIVolumeValue=void 0,o}o(i,e);var t=i.prototype;return t.onLoad=function(){this.UISliderNode=this.node.getChildByName("UISlider"),this.UISlider=this.UISliderNode.getComponent(l),this.UIVolumeValueNode=n("UIVolumeLayout/UIVolumeLabel",this.node),this.UIVolumeValue=this.UIVolumeValueNode.getComponent(r),this.UISlider.progress=u.inst.getUIVolume,this.UIVolumeValue.string=String(Math.round(100*this.UISlider.progress))},t.onEnable=function(){this.UISlider.node.on("slide",this.callback,this)},t.onDisable=function(){this.UISlider.node.off("slide",this.callback,this)},t.callback=function(e){this.UIVolumeValue.string=String(Math.round(100*e.progress)),u.inst.setUIVolume(e.progress)},i}(s))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/UIState.ts",["cc"],(function(n){var e,t;return{setters:[function(n){e=n.cclegacy,t=n.Enum}],execute:function(){e._RF.push({},"d0d61Xy+KpDbaBog41IeC++","UIState",void 0);var u=n("UIState",function(n){return n[n.None=1]="None",n[n.Menu=2]="Menu",n[n.PlayMenu=3]="PlayMenu",n[n.SettingsMenu=4]="SettingsMenu",n[n.AudioSettingsMenu=5]="AudioSettingsMenu",n[n.ControlsSettingsMenu=6]="ControlsSettingsMenu",n[n.RoomMenu=7]="RoomMenu",n[n.MatchmakingMenu=8]="MatchmakingMenu",n}({}));t(u),e._RF.pop()}}}));

System.register("chunks:///_virtual/WorldEntity.ts",["cc","./BodyType.ts","./ShapeType.ts","./GameManager.ts"],(function(t){var e,i,s,o,n,a,d,h,r,y,c;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.Vec3,o=t.instantiate,n=t.director,a=t.MeshRenderer,d=t.RigidBody,h=t.physics},function(t){r=t.BodyType},function(t){y=t.ShapeType},function(t){c=t.GameManager}],execute:function(){var p;e._RF.push({},"67ffdghv8dJroFZOA1tDxMl","WorldEntity",void 0);var l=i.ccclass;t("WorldEntity",l("WorldEntity")(p=function(){function t(t,e,i){this.node=void 0,this.state=void 0,this.mesh=void 0,this.meshRenderer=void 0,this.id=void 0,this.body=void 0,this.collider=void 0,this.targetPosition=void 0;var p,l=i.getChildByName(e);switch(l&&l.destroy(),this.id=e,this.state=t,t.shapeType){case y.Sphere:p=c.inst.prefabsCache.get("Sphere");break;case y.Box:default:p=c.inst.prefabsCache.get("Cube")}switch(this.node=o(p),this.node.parent=n.getScene().getChildByName("Entities"),this.node.name=this.id,this.node.layer=1<<18,this.meshRenderer=this.node.getComponent(a),this.node.setPosition(t.position),this.node.setRotation(t.quaternion),this.node.setScale(t.size),this.body=this.node.addComponent(d),this.body.node=this.node,0===t.mass?this.body.mass=1e-4:this.body.mass=t.mass,this.body.setLinearVelocity(this.state.velocity),this.body.setAngularVelocity(this.state.angularVelocity),t.bodyType){case r.Static:this.body.type=h.ERigidBodyType.STATIC;break;case r.Dynamic:this.body.type=h.ERigidBodyType.DYNAMIC;break;case r.Kinematic:this.body.type=h.ERigidBodyType.KINEMATIC}this.body.linearFactor=new s(this.state.linearFactor.x,this.state.linearFactor.y,this.state.linearFactor.z),this.body.linearDamping=this.state.linearDamping,this.state.fixedRotation&&(this.body.angularFactor=new s(0,0,0)),this.body.useGravity=!1,this.targetPosition=new s}var e=t.prototype;return e.moveToVector=function(t){this.node.setPosition(t)},e.movePosition=function(t,e,i){this.node.setPosition(new s(t,e,i))},e.moveInputs=function(t){this.node.getPosition();t.upward&&!t.downward?this.body.setLinearVelocity(new s(0,this.state.baseSpeed,0)):!t.upward&&t.downward?this.body.setLinearVelocity(new s(0,-this.state.baseSpeed,0)):this.body.setLinearVelocity(new s(0,0,0))},e.updateState=function(){this.targetPosition.set(this.state.position.x,this.state.position.y,this.state.position.z),this.node.setPosition(this.targetPosition),this.node.setRotation(this.state.quaternion),this.node.setScale(this.state.size)},e.destroy=function(){this.node.destroy()},t}())||p);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});